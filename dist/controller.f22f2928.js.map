{"version":3,"sources":["js/helpers.js","js/config.js","data.json","js/models/dataModel.js","js/views/coreView.js","js/views/calculatorsView.js","js/models/calculatorsModel.js","js/views/tableMonthlyView.js","js/views/tableProfitableView.js","js/views/chartOverallView.js","js/models/tableMonthlyModel.js","js/models/tableProfitableModel.js","../node_modules/d3-path/src/path.js","../node_modules/d3-path/src/index.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/math.js","../node_modules/d3-shape/src/arc.js","../node_modules/d3-shape/src/array.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/line.js","../node_modules/d3-shape/src/area.js","../node_modules/d3-shape/src/descending.js","../node_modules/d3-shape/src/identity.js","../node_modules/d3-shape/src/pie.js","../node_modules/d3-shape/src/curve/radial.js","../node_modules/d3-shape/src/lineRadial.js","../node_modules/d3-shape/src/areaRadial.js","../node_modules/d3-shape/src/pointRadial.js","../node_modules/d3-shape/src/link/index.js","../node_modules/d3-shape/src/symbol/circle.js","../node_modules/d3-shape/src/symbol/cross.js","../node_modules/d3-shape/src/symbol/diamond.js","../node_modules/d3-shape/src/symbol/star.js","../node_modules/d3-shape/src/symbol/square.js","../node_modules/d3-shape/src/symbol/triangle.js","../node_modules/d3-shape/src/symbol/wye.js","../node_modules/d3-shape/src/symbol.js","../node_modules/d3-shape/src/noop.js","../node_modules/d3-shape/src/curve/basis.js","../node_modules/d3-shape/src/curve/basisClosed.js","../node_modules/d3-shape/src/curve/basisOpen.js","../node_modules/d3-shape/src/curve/bump.js","../node_modules/d3-shape/src/curve/bundle.js","../node_modules/d3-shape/src/curve/cardinal.js","../node_modules/d3-shape/src/curve/cardinalClosed.js","../node_modules/d3-shape/src/curve/cardinalOpen.js","../node_modules/d3-shape/src/curve/catmullRom.js","../node_modules/d3-shape/src/curve/catmullRomClosed.js","../node_modules/d3-shape/src/curve/catmullRomOpen.js","../node_modules/d3-shape/src/curve/linearClosed.js","../node_modules/d3-shape/src/curve/monotone.js","../node_modules/d3-shape/src/curve/natural.js","../node_modules/d3-shape/src/curve/step.js","../node_modules/d3-shape/src/offset/none.js","../node_modules/d3-shape/src/order/none.js","../node_modules/d3-shape/src/stack.js","../node_modules/d3-shape/src/offset/expand.js","../node_modules/d3-shape/src/offset/diverging.js","../node_modules/d3-shape/src/offset/silhouette.js","../node_modules/d3-shape/src/offset/wiggle.js","../node_modules/d3-shape/src/order/appearance.js","../node_modules/d3-shape/src/order/ascending.js","../node_modules/d3-shape/src/order/descending.js","../node_modules/d3-shape/src/order/insideOut.js","../node_modules/d3-shape/src/order/reverse.js","../node_modules/d3-shape/src/index.js","js/views/chartPerformanceView.js","js/models/chartPerformanceModel.js","js/views/chartWorstBestView.js","js/models/chartWorstBestModel.js","js/views/accountDetailsView.js","js/views/journalEntriesView.js","js/views/journalFiltersView.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/number.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/count.js","../node_modules/d3-array/src/cross.js","../node_modules/d3-array/src/cumsum.js","../node_modules/d3-array/src/descending.js","../node_modules/d3-array/src/variance.js","../node_modules/d3-array/src/deviation.js","../node_modules/d3-array/src/extent.js","../node_modules/d3-array/src/fsum.js","../node_modules/internmap/src/index.js","../node_modules/d3-array/src/identity.js","../node_modules/d3-array/src/group.js","../node_modules/d3-array/src/permute.js","../node_modules/d3-array/src/sort.js","../node_modules/d3-array/src/groupSort.js","../node_modules/d3-array/src/array.js","../node_modules/d3-array/src/constant.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-array/src/nice.js","../node_modules/d3-array/src/threshold/sturges.js","../node_modules/d3-array/src/bin.js","../node_modules/d3-array/src/max.js","../node_modules/d3-array/src/min.js","../node_modules/d3-array/src/quickselect.js","../node_modules/d3-array/src/quantile.js","../node_modules/d3-array/src/threshold/freedmanDiaconis.js","../node_modules/d3-array/src/threshold/scott.js","../node_modules/d3-array/src/maxIndex.js","../node_modules/d3-array/src/mean.js","../node_modules/d3-array/src/median.js","../node_modules/d3-array/src/merge.js","../node_modules/d3-array/src/minIndex.js","../node_modules/d3-array/src/pairs.js","../node_modules/d3-array/src/range.js","../node_modules/d3-array/src/least.js","../node_modules/d3-array/src/leastIndex.js","../node_modules/d3-array/src/greatest.js","../node_modules/d3-array/src/greatestIndex.js","../node_modules/d3-array/src/scan.js","../node_modules/d3-array/src/shuffle.js","../node_modules/d3-array/src/sum.js","../node_modules/d3-array/src/transpose.js","../node_modules/d3-array/src/zip.js","../node_modules/d3-array/src/every.js","../node_modules/d3-array/src/some.js","../node_modules/d3-array/src/filter.js","../node_modules/d3-array/src/map.js","../node_modules/d3-array/src/reduce.js","../node_modules/d3-array/src/reverse.js","../node_modules/d3-array/src/difference.js","../node_modules/d3-array/src/disjoint.js","../node_modules/d3-array/src/set.js","../node_modules/d3-array/src/intersection.js","../node_modules/d3-array/src/superset.js","../node_modules/d3-array/src/subset.js","../node_modules/d3-array/src/union.js","../node_modules/d3-array/src/index.js","js/views/journalFormView.js","js/models/journalFormModel.js","js/views/settingsView.js","js/controller.js","../../../Users/Patryk/AppData/Roaming/npm/node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["stringifyNum","number","toString","replace","makeAbsolute","num","Math","abs","reduceData","arr","reduce","acc","crunchData","Array","isArray","length","singleNumber","toFixed","filterNonStrings","filtered","filter","item","map","kFormatter","decimal","unit","sign","createShortDate","specifiedDate","joinedDate","Date","toLocaleDateString","split","month","date","year","slice","createLongDate","shortDate","reverse","day","currentYear","getFullYear","fullDate","String","ENTRIES_PER_PAGE","MONTHS_FORMAT","USER_USERNAME","USER_PASSWORD","module","exports","user","startingUserObject","capital","initialCapital","newAccount","overall","total","proportions","side","streaks","wins","trades","losses","current","worstTrades","bestTrades","tickers","calendarData","journal","dummyJournal","id","dateLong","dateShort","ticker","tradeEntries","tradeExits","sharesAmount","avgEntry","avgExit","returnCash","returnPercent","previousTicker","previousDateShort","previousDateLong","body","fetchUserFromJSON","jsonData","console","log","clearUserObject","checkIfJournalEmpty","sortJournal","data","sort","a","b","addToOverall","newEntry","newEntryIndex","previousSide","compareToStreaks","streakObj","indexInLosses","loss","indexOf","splice","indexInWins","win","indexInCurrent","cur","currentStreakLength","push","compareToWorstBest","indexInBest","trade","pop","indexInWorst","addToTickers","entry","tradesIndex","currentTicker","indexInTrades","shares","avgReturn","addToCalendarData","previousDateKey","getMonth","previousDateIndex","tradeIndex","dateKey","currentKey","entryDateIndex","compareStatistics","passData","field","passNestedData","field2","updateCapital","amount","action","round","updateCalendarData","obj","Object","keys","forEach","key","updateJournalData","e","updateJournalTradesTotals","index","findJournalEntry","targetSelectedEntry","entryID","IndexInJournal","foundEntry","indexInWinsStreak","indexInLossStreak","indexInCurrentStreak","indexInTickers","indexInCalendar","saveToLocalStorage","localStorage","setItem","JSON","stringify","coreEls","getElements","core","document","querySelector","nav","loadingScreen","singleBtnPopup","doubleBtnPopup","singleBtnPopupOkBtn","doubleBtnPopupYesBtn","doubleBtnPopupNoBtn","sectionOverview","sectionMonthly","sectionJournal","sectionCalculators","sectionSettings","sectionHelp","performanceChart","overallChart","tableProfitable","worstBestChart","hideAllSections","section","classList","add","toggleActiveNavBtns","targetEl","remove","showSingleBtnPopup","popupContentWrapper","children","messages","message","html","insertAdjacentHTML","showDoubleBtnPopup","source","setAttribute","hidePopup","activePopup","querySelectorAll","text","removeLoadingScreen","queryCoreEls","addNavigationHandler","handler","addEventListener","target","addPopupHandler","preventDefault","stopPropagation","getAttribute","toggleSections","contains","redirectToLogin","window","location","href","showNoDataScreens","card","hideNoDataScreens","calculatorEls","calcPosition","positionEntryPrice","positionRiskPercentage","positionStopPrice","positionResult","calcRatio","ratioEntryPrice","ratioExitPrice","ratioStopPrice","ratioResult","calcCapital","capitalSign","capitalSignBtn","capitalInput","capitalUpdateBtn","capitalMessage","queryCalcEls","checkFieldsForData","el1","el2","el3","value","addCalcCapitalHandler","isNaN","previousElementSibling","innerHTML","addCalcPositionHandler","input","isFinite","formattedData","addCalcRatioHandler","renderCapitalMessage","spanEls","textContent","setTimeout","renderCalcResult","result","el","clearCalcResult","calcPositionResult","accountCapital","dataArr","risk","stop","moneyRisk","stopDistance","calcRatioResult","exit","exitDistance","monthlyEls","monthlyTable","monthlyTableHead","queryMonthlyEls","renderMonthlyTable","monthlyTableRows","from","row","sortedKeys","monthlyReturn","totalTrades","avgWinPercent","avgLossPercent","battingAvg","winLossRatio","long","short","profitableEls","profitableTable","profitableTableHead","queryProfitableEls","renderProfitableTable","tableData","parentElement","totalProfit","totalShares","battingAvgPercent","overallEls","pieStreakCard","shortLongCanvas","winStreakDate","winStreakTotal","winStreakProfit","lossStreakDate","lossStreakTotal","lossStreakProfit","overallTradesNumber","shortPositions","longPositions","queryOverallEls","clearLongShortCanvas","renderLongShortStats","renderStreaks","pieData","renderLongShortPie","passedData","canvasRect","getBoundingClientRect","margin","top","right","bottom","left","graphWidth","width","graphHeight","height","graphRadius","graphCenter","x","y","svg","d3","select","append","attr","graph","pie","d","arcPath","arc","outerRadius","innerRadius","updateLongShortPie","paths","selectAll","enter","createPlaceholderObj","profitableNumber","calcBattingAvg","profitable","calcWinLossRatio","computeMonthlyData","rawData","formattedMonths","currentMonth","tableUnit","flattenedDays","flat","currentSide","convertToLeader","formattedLeader","tradeResults","winPercentTrades","percent","computeProfitableData","tickerData","sortedTickers","values","topSix","leadersArray","leader","leaderFormat","pi","PI","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","_","path","prototype","constructor","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","r","x0","y0","x21","y21","x01","y01","l01_2","Error","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","w","h","constant","atan2","max","min","halfPi","asin","arcInnerRadius","arcOuterRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","intersect","x3","y3","x10","y10","x32","y32","t","cornerTangents","r1","rc","lo","ox","oy","x11","y11","x00","y00","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","cornerRadius","padRadius","context","buffer","r0","apply","arguments","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","t0","t1","p0","p1","oc","ax","ay","bx","by","kc","lc","centroid","Linear","_context","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","point","p","defined","curve","curveLinear","output","undefined","pointX","pointY","line","i","n","defined0","area","j","k","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","identity","sortValues","descending","sum","arcs","pa","v","curveRadialLinear","curveRadial","Radial","_curve","radial","lineRadial","c","angle","radius","lineStartAngle","lineEndAngle","lineInnerRadius","lineOuterRadius","linkSource","linkTarget","link","argv","call","s","curveHorizontal","curveVertical","p2","p3","linkHorizontal","linkVertical","linkRadial","draw","size","tan30","tan30_2","ka","kr","kx","ky","sqrt3","symbols","circle","cross","diamond","square","star","triangle","wye","type","symbol","that","Basis","BasisClosed","noop","_x2","_x3","_x4","_y2","_y3","_y4","BasisOpen","Bump","_x","bumpX","bumpY","Bundle","beta","_basis","_beta","_y","custom","bundle","_k","Cardinal","tension","cardinal","CardinalClosed","_x5","_y5","CardinalOpen","_l01_a","_l01_2a","_l12_a","_l12_2a","_l23_a","_l23_2a","m","CatmullRom","alpha","_alpha","x23","y23","pow","catmullRom","CatmullRomClosed","CatmullRomOpen","LinearClosed","slope3","h0","h1","s0","s1","slope2","MonotoneX","_t0","MonotoneY","ReflectContext","create","monotoneX","monotoneY","Natural","px","controlPoints","py","i0","i1","Step","_t","stepBefore","stepAfter","series","order","o","stackValue","stackSeries","orderNone","offset","offsetNone","stack","sz","oz","yp","yn","s2","si","sij0","sij1","s3","sk","skj0","skj1","peaks","peak","vi","vj","Infinity","sums","tops","bottoms","concat","performanceEls","performanceCanvas","performanceDayBtn","performanceMonthBtn","performanceHeading","queryPerformanceEls","addPerformanceRenderHandler","btn","updatePerformanceHeading","clearPerformanceCanvas","chartData","chartType","renderPerformanceChart","scaleLinear","range","xAxisGroup","yAxisGroup","position","updatePerformanceChart","maxMinVals","extent","gap","domain","circles","xAxis","axisBottom","ticks","tickFormat","yAxis","axisLeft","yAxisTicks","yTicksTranslates","horizontalLinesGroup","horizontalLine","points","pointsCoords","labelsGroup","label","formatShortDate","splitDate","shift","join","formatMonthlyData","monthsArr","monthKey","formattedMonthsArr","lastDay","lastTradeIndexInJournal","formatDailyData","daysArr","formattedDaysArr","formatPerformanceData","bestWorstEls","bestWorstCanvas","worstBtn","bestBtn","queryBestWorstEls","clearWorstBestCanvas","addWorstBestRenderHandler","renderWorstBestChart","determineSign","scaleBand","paddingInner","paddingOuter","updateWorstBestChart","rects","bandwidth","bars","barsDimensions","bar","xOverlayLineGroup","formatWorstBestData","stocksData","dataCopy","stock","detailsEls","capitalOutput","queryDetailsEls","updateCapitalOutput","capitalData","journalEntriesEls","journalEntriesWrapper","journalPaginationWrapper","journalFormWrapper","queryJournalEntriesEls","addJournalEntriesHandler","closest","clickedCard","addJournalPaginationHandler","removeEmptyJournalCard","emptyCard","activateEntry","selectFirstEntry","entryEl","previouslyActive","makePaginationBtnActive","paginationPage","priorPagination","renderJournalPagination","entriesNumber","buttonsNumber","ceil","clearJournalEntries","existingEntries","renderJournalEntries","entriesData","clear","existingEls","entriesRange","entriesLength","journalFilterEls","journalFiltersWrapper","queryJournalFilterEls","addJournalFiltersHandler","existingNewEntry","f","delta","compare","ascendingComparator","hi","mid","center","numbers","valueof","ascendingBisect","ascending","bisectRight","bisectLeft","bisectCenter","count","array","empty","arrayify","reducer","lengths","fill","product","some","cumsum","Float64Array","variance","mean","deviation","Adder","_partials","_n","valueOf","fsum","adder","fcumsum","InternMap","Map","entries","keyof","defineProperties","_intern","_key","set","get","intern_get","has","intern_set","delete","intern_delete","InternSet","Set","group","nest","groups","rollup","rollups","unique","indexes","regroup","F","Symbol","iterator","TypeError","Uint32Array","groupSort","ak","av","bk","bv","e10","e5","e2","start","step","tickIncrement","floor","power","LN10","error","tickStep","step0","step1","nice","prestep","LN2","threshold","sturges","histogram","xz","tz","tn","bins","bin","thresholds","quickselect","z","exp","sd","newLeft","newRight","swap","quantile","value0","subarray","value1","quantileSorted","maxIndex","flatten","arrays","merge","minIndex","pairs","pairof","pair","previous","first","least","minValue","element","leastIndex","greatest","maxValue","greatestIndex","scan","shuffler","random","shuffle","matrix","transpose","every","test","mapper","done","next","difference","others","other","disjoint","is","intersection","out","superset","subset","union","journalFormEls","detailsEntryPriceAvg","detailsExitPriceAvg","detailsEntrySharesTotal","detailsExitSharesTotal","toggleDisabledState","mode","manualInputs","disabled","recalculateDetailsPrice","targetElClass","siblingElClass","inputsArr","weightedResultsArr","nextElementSibling","allShares","filteredWeightedResultsArr","recalculateDetailsShares","calculateDetailsOutput","focusedEl","addKeyEventToDetailsInputs","keystrokeTimer","journalForm","clearTimeout","removeFirstCrossInstances","addCrossIconToExtraRows","crossBtn","lastElementChild","queryJournalFormEls","addJournalFormEventsHandler","formId","grabEntryFormID","removeJournalFormDetailsRow","switchJournalFormModes","instruction","renderExtraDetailsRows","lastRow","rowClone","cloneNode","insertAdjacentElement","checkFormMode","switchPositionSide","sideValueEl","swapBtn","firstElementChild","grabAllUserInputs","formInputs","entriesPrices","entriesShares","exitsPrices","exitsShares","clearJournalForm","updateFormValidationError","formValidationError","clearFormValidationError","renderJournalForm","singleEntry","single","entriesSection","exitsSection","transaction","validateJournalForm","inputData","dateRegex","tickerRegex","toUpperCase","now","entriesRegex","areEntriesValid","digit","price","entryObj","settingsEls","settingsResetBtn","querySettingsEls","addAppResetHandler","controlLoading","controlNoDataScreens","outcome","controlNavigation","furtherAction","controlPopups","dataAttr","controlProfitableRender","controlOverallRender","controlPerformanceRender","controlWorstBestRender","controlMonthlyRender","controlLongShortPieRender","controlJournalRender","controlCalcCapital","controlCalcPosition","controlCalcRatio","computedData","profitableStocks","activeEntryID","controlJournalFormEvents","currentEntryID","validationOutcome","updatedCapital","controlJournalActiveEntries","controlJournalFilters","controlJournalPagination","paginationBtn","controlAppReset","queryDOM","resizeTimer","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","overlay","createErrorOverlay","appendChild","getElementById","createElement","stackTrace","innerText","getParents","modules","parents","dep","Function","deps","cached","cache","cb"],"mappings":"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","file":"controller.f22f2928.js","sourceRoot":"..\\src","sourcesContent":["export const stringifyNum = number =>\r\n  number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n\r\nexport const makeAbsolute = num => Math.abs(num);\r\n\r\nexport const reduceData = arr => arr.reduce((acc, num) => acc + num, 0);\r\n\r\nexport const crunchData = function (arr) {\r\n  if (!Array.isArray(arr) || arr.length < 1) return [];\r\n  const singleNumber = reduceData(arr);\r\n  return (singleNumber / arr.length).toFixed(2);\r\n};\r\n\r\nexport const filterNonStrings = arr => {\r\n  let filtered = arr\r\n    .filter(item => typeof item === 'string' || typeof item === 'number')\r\n    .map(item => +item);\r\n  if (filtered.length < 1) filtered = [0];\r\n  return filtered;\r\n};\r\n\r\nexport const kFormatter = function (num, decimal = 999, unit = 'k') {\r\n  if (!num) return 0;\r\n  return Math.abs(num) > decimal\r\n    ? Math.sign(num) * (Math.abs(num) / 1000).toFixed(2) + unit\r\n    : Math.sign(num) * Math.abs(num);\r\n};\r\n\r\nexport const createShortDate = function (specifiedDate = '') {\r\n  let joinedDate;\r\n  if (specifiedDate) {\r\n    const [month, date, year] = new Date(specifiedDate)\r\n      .toLocaleDateString('en-US')\r\n      .split('/');\r\n    joinedDate = date + '/' + month + '/' + year.slice(-2);\r\n  } else {\r\n    const [month, date, year] = new Date()\r\n      .toLocaleDateString('en-US')\r\n      .split('/');\r\n    joinedDate = date + '/' + month + '/' + year.slice(-2);\r\n  }\r\n  return joinedDate;\r\n};\r\n\r\nexport const createLongDate = function (shortDate) {\r\n  let [year, month, day] = shortDate.split('/').reverse();\r\n\r\n  // check if each data has the correct length\r\n  if (\r\n    year.length !== 2 ||\r\n    (month.length > 2 && month.length < 1) ||\r\n    day.length > 2 ||\r\n    day.length < 1\r\n  )\r\n    return 'ERROR';\r\n\r\n  // coerce the string into numbers\r\n  year = +('20' + year);\r\n  month = +month;\r\n  day = +day;\r\n\r\n  // check if day, month or year failed the coercion due to incorrect format\r\n  if (!year || !month || !day) return 'ERROR';\r\n\r\n  // get current year\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  // run year, day and month range validation\r\n  if (year < 2010 ?? year > currentYear) return 'ERROR';\r\n  if (month < 0 || month > 12) return 'ERROR';\r\n  if (day < 1 || day > 31) return 'ERROR';\r\n\r\n  const fullDate = new Date(year, month - 1, day);\r\n  return String(fullDate);\r\n};\r\n","export const ENTRIES_PER_PAGE = 8;\r\nexport const MONTHS_FORMAT = [\r\n  'jan',\r\n  'feb',\r\n  'mar',\r\n  'apr',\r\n  'may',\r\n  'jun',\r\n  'jul',\r\n  'aug',\r\n  'sep',\r\n  'oct',\r\n  'nov',\r\n  'dec',\r\n];\r\nexport const USER_USERNAME = 'trader';\r\nexport const USER_PASSWORD = 'app';\r\n","module.exports = {\r\n  \"capital\": 7261,\r\n  \"initialCapital\": 7000,\r\n  \"newAccount\": false,\r\n  \"overall\": {\r\n    \"total\": 8,\r\n    \"proportions\": [\r\n      {\r\n        \"side\": \"long\",\r\n        \"total\": 4\r\n      },\r\n      {\r\n        \"side\": \"short\",\r\n        \"total\": 4\r\n      }\r\n    ]\r\n  },\r\n  \"streaks\": {\r\n    \"wins\": {\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618178927841,\r\n          \"ticker\": \"AMC\",\r\n          \"date\": \"9/3/21\",\r\n          \"returnCash\": 111\r\n        },\r\n        {\r\n          \"id\": 1618178976232,\r\n          \"ticker\": \"RIOT\",\r\n          \"date\": \"12/3/21\",\r\n          \"returnCash\": 84\r\n        }\r\n      ]\r\n    },\r\n    \"losses\": {\r\n      \"trades\": []\r\n    },\r\n    \"current\": {\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618330625831,\r\n          \"ticker\": \"OCGN\",\r\n          \"date\": \"14/4/21\",\r\n          \"returnCash\": -32.2\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \"worstTrades\": [\r\n    {\r\n      \"id\": 1618183416710,\r\n      \"dateLong\": \"Sat Apr 03 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"dateShort\": \"3/4/21\",\r\n      \"ticker\": \"VZ\",\r\n      \"returnCash\": -64.02\r\n    },\r\n    {\r\n      \"id\": 1618179060347,\r\n      \"dateLong\": \"Sun Mar 14 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"14/3/21\",\r\n      \"ticker\": \"SNAP\",\r\n      \"returnCash\": -60\r\n    },\r\n    {\r\n      \"id\": 1618330625831,\r\n      \"dateLong\": \"Wed Apr 14 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"dateShort\": \"14/4/21\",\r\n      \"ticker\": \"OCGN\",\r\n      \"returnCash\": -32.2\r\n    }\r\n  ],\r\n  \"bestTrades\": [\r\n    {\r\n      \"id\": 1618330460149,\r\n      \"dateLong\": \"Tue Apr 13 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"dateShort\": \"13/4/21\",\r\n      \"ticker\": \"TWTR\",\r\n      \"returnCash\": 126\r\n    },\r\n    {\r\n      \"id\": 1618178927841,\r\n      \"dateLong\": \"Tue Mar 09 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"9/3/21\",\r\n      \"ticker\": \"AMC\",\r\n      \"returnCash\": 111\r\n    },\r\n    {\r\n      \"id\": 1618178976232,\r\n      \"dateLong\": \"Fri Mar 12 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"12/3/21\",\r\n      \"ticker\": \"RIOT\",\r\n      \"returnCash\": 84\r\n    },\r\n    {\r\n      \"id\": 1618179285427,\r\n      \"dateLong\": \"Wed Mar 24 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"24/3/21\",\r\n      \"ticker\": \"BMBL\",\r\n      \"returnCash\": 80\r\n    },\r\n    {\r\n      \"id\": 1618179185438,\r\n      \"dateLong\": \"Fri Mar 19 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"19/3/21\",\r\n      \"ticker\": \"NIO\",\r\n      \"returnCash\": 16\r\n    }\r\n  ],\r\n  \"tickers\": {\r\n    \"AMC\": {\r\n      \"ticker\": \"AMC\",\r\n      \"avgReturn\": 111,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618178927841,\r\n          \"shares\": 100,\r\n          \"returnCash\": 111,\r\n          \"returnPercent\": 1.59\r\n        }\r\n      ]\r\n    },\r\n    \"RIOT\": {\r\n      \"ticker\": \"RIOT\",\r\n      \"avgReturn\": 84,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618178976232,\r\n          \"shares\": 70,\r\n          \"returnCash\": 84,\r\n          \"returnPercent\": 1.18\r\n        }\r\n      ]\r\n    },\r\n    \"SNAP\": {\r\n      \"ticker\": \"SNAP\",\r\n      \"avgReturn\": -60,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618179060347,\r\n          \"shares\": 60,\r\n          \"returnCash\": -60,\r\n          \"returnPercent\": -0.83\r\n        }\r\n      ]\r\n    },\r\n    \"NIO\": {\r\n      \"ticker\": \"NIO\",\r\n      \"avgReturn\": 16,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618179185438,\r\n          \"shares\": 50,\r\n          \"returnCash\": 16,\r\n          \"returnPercent\": 0.22\r\n        }\r\n      ]\r\n    },\r\n    \"BMBL\": {\r\n      \"ticker\": \"BMBL\",\r\n      \"avgReturn\": 80,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618179285427,\r\n          \"shares\": 100,\r\n          \"returnCash\": 80,\r\n          \"returnPercent\": 1.12\r\n        }\r\n      ]\r\n    },\r\n    \"VZ\": {\r\n      \"ticker\": \"VZ\",\r\n      \"avgReturn\": -64.02,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618183416710,\r\n          \"shares\": 66,\r\n          \"returnCash\": -64.02,\r\n          \"returnPercent\": -0.89\r\n        }\r\n      ]\r\n    },\r\n    \"TWTR\": {\r\n      \"ticker\": \"TWTR\",\r\n      \"avgReturn\": 126,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618330460149,\r\n          \"shares\": 120,\r\n          \"returnCash\": 126,\r\n          \"returnPercent\": 1.76\r\n        }\r\n      ]\r\n    },\r\n    \"OCGN\": {\r\n      \"ticker\": \"OCGN\",\r\n      \"avgReturn\": -32.2,\r\n      \"trades\": [\r\n        {\r\n          \"id\": 1618330625831,\r\n          \"shares\": 70,\r\n          \"returnCash\": -32.2,\r\n          \"returnPercent\": -0.44\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \"calendarData\": {\r\n    \"mar21\": [\r\n      {\r\n        \"dateLong\": \"Tue Mar 09 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n        \"dateShort\": \"9/3/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618178927841,\r\n            \"side\": \"long\",\r\n            \"returnCash\": 111,\r\n            \"returnPercent\": 1.59\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"dateLong\": \"Fri Mar 12 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n        \"dateShort\": \"12/3/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618178976232,\r\n            \"side\": \"long\",\r\n            \"returnCash\": 84,\r\n            \"returnPercent\": 1.18\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"dateLong\": \"Sun Mar 14 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n        \"dateShort\": \"14/3/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618179060347,\r\n            \"side\": \"short\",\r\n            \"returnCash\": -60,\r\n            \"returnPercent\": -0.83\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"dateLong\": \"Fri Mar 19 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n        \"dateShort\": \"19/3/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618179185438,\r\n            \"side\": \"short\",\r\n            \"returnCash\": 16,\r\n            \"returnPercent\": 0.22\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"dateLong\": \"Wed Mar 24 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n        \"dateShort\": \"24/3/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618179285427,\r\n            \"side\": \"long\",\r\n            \"returnCash\": 80,\r\n            \"returnPercent\": 1.12\r\n          }\r\n        ]\r\n      }\r\n    ],\r\n    \"apr21\": [\r\n      {\r\n        \"dateLong\": \"Sat Apr 03 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n        \"dateShort\": \"3/4/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618183416710,\r\n            \"side\": \"short\",\r\n            \"returnCash\": -64.02,\r\n            \"returnPercent\": -0.89\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"dateLong\": \"Tue Apr 13 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n        \"dateShort\": \"13/4/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618330460149,\r\n            \"side\": \"long\",\r\n            \"returnCash\": 126,\r\n            \"returnPercent\": 1.76\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"dateLong\": \"Wed Apr 14 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n        \"dateShort\": \"14/4/21\",\r\n        \"trades\": [\r\n          {\r\n            \"id\": 1618330625831,\r\n            \"side\": \"short\",\r\n            \"returnCash\": -32.2,\r\n            \"returnPercent\": -0.44\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  \"journal\": [\r\n    {\r\n      \"id\": 1618178927841,\r\n      \"dateLong\": \"Tue Mar 09 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"9/3/21\",\r\n      \"ticker\": \"AMC\",\r\n      \"side\": \"long\",\r\n      \"tradeEntries\": [\r\n        [9.35, 50],\r\n        [9.55, 50]\r\n      ],\r\n      \"tradeExits\": [\r\n        [10.54, 50],\r\n        [10.59, 50]\r\n      ],\r\n      \"sharesAmount\": 100,\r\n      \"avgEntry\": 9.45,\r\n      \"avgExit\": 10.56,\r\n      \"returnCash\": 111,\r\n      \"returnPercent\": 1.59,\r\n      \"total\": 7111,\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Facilisis volutpat est velit egestas dui id ornare. Eget magna fermentum iaculis eu non. In tellus integer feugiat scelerisque varius morbi enim nunc faucibus. A lacus vestibulum sed arcu non odio euismod lacinia. Etiam sit amet nisl purus. Lorem sed risus ultricies tristique nulla aliquet enim. Augue ut lectus arcu bibendum at varius vel. Nulla pharetra diam sit amet nisl suscipit adipiscing bibendum. \"\r\n    },\r\n    {\r\n      \"id\": 1618178976232,\r\n      \"dateLong\": \"Fri Mar 12 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"12/3/21\",\r\n      \"ticker\": \"RIOT\",\r\n      \"side\": \"long\",\r\n      \"tradeEntries\": [[49.62, 70]],\r\n      \"tradeExits\": [[50.82, 70]],\r\n      \"sharesAmount\": 70,\r\n      \"avgEntry\": 49.62,\r\n      \"avgExit\": 50.82,\r\n      \"returnCash\": 84,\r\n      \"returnPercent\": 1.18,\r\n      \"total\": 7195,\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"\"\r\n    },\r\n    {\r\n      \"id\": 1618179060347,\r\n      \"dateLong\": \"Sun Mar 14 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"14/3/21\",\r\n      \"ticker\": \"SNAP\",\r\n      \"side\": \"short\",\r\n      \"tradeEntries\": [[63.11, 60]],\r\n      \"tradeExits\": [[64.11, 60]],\r\n      \"sharesAmount\": 60,\r\n      \"avgEntry\": 63.11,\r\n      \"avgExit\": 64.11,\r\n      \"returnCash\": -60,\r\n      \"returnPercent\": -0.83,\r\n      \"total\": 7135,\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"\"\r\n    },\r\n    {\r\n      \"id\": 1618179185438,\r\n      \"dateLong\": \"Fri Mar 19 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"19/3/21\",\r\n      \"ticker\": \"NIO\",\r\n      \"side\": \"short\",\r\n      \"tradeEntries\": [[39.84, 50]],\r\n      \"tradeExits\": [[39.52, 50]],\r\n      \"sharesAmount\": 50,\r\n      \"avgEntry\": 39.84,\r\n      \"avgExit\": 39.52,\r\n      \"returnCash\": 16,\r\n      \"returnPercent\": 0.22,\r\n      \"total\": 7151,\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"Urna nunc id cursus metus aliquam eleifend mi in. Ullamcorper sit amet risus nullam eget felis eget. Sit amet facilisis magna etiam tempor orci. Sed egestas egestas fringilla phasellus faucibus. Nulla aliquet enim tortor at auctor. Scelerisque viverra mauris in aliquam. Nisl rhoncus mattis rhoncus urna neque viverra justo nec ultrices. Consequat nisl vel pretium lectus quam id.\"\r\n    },\r\n    {\r\n      \"id\": 1618179285427,\r\n      \"dateLong\": \"Wed Mar 24 2021 00:00:00 GMT+0000 (Greenwich Mean Time)\",\r\n      \"dateShort\": \"24/3/21\",\r\n      \"ticker\": \"BMBL\",\r\n      \"side\": \"long\",\r\n      \"tradeEntries\": [\r\n        [60.24, 50],\r\n        [60.41, 50]\r\n      ],\r\n      \"tradeExits\": [\r\n        [60.98, 40],\r\n        [61.23, 60]\r\n      ],\r\n      \"sharesAmount\": 100,\r\n      \"avgEntry\": 60.33,\r\n      \"avgExit\": 61.13,\r\n      \"returnCash\": 80,\r\n      \"returnPercent\": 1.12,\r\n      \"total\": 7231,\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"\"\r\n    },\r\n    {\r\n      \"id\": 1618183416710,\r\n      \"dateLong\": \"Sat Apr 03 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"dateShort\": \"3/4/21\",\r\n      \"ticker\": \"VZ\",\r\n      \"side\": \"short\",\r\n      \"tradeEntries\": [[56.65, 66]],\r\n      \"tradeExits\": [[57.62, 66]],\r\n      \"sharesAmount\": 66,\r\n      \"avgEntry\": 56.65,\r\n      \"avgExit\": 57.62,\r\n      \"returnCash\": -64.02,\r\n      \"returnPercent\": -0.89,\r\n      \"total\": 7167,\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"Orci sagittis eu volutpat odio facilisis. Sed blandit libero volutpat sed cras ornare arcu. Sit amet porttitor eget dolor morbi non arcu risus quis. Diam sit amet nisl suscipit. Consectetur adipiscing elit pellentesque habitant morbi tristique senectus et. Nunc non blandit massa enim nec dui nunc. Elementum sagittis vitae et leo. Accumsan in nisl nisi scelerisque. Vitae sapien pellentesque habitant morbi tristique senectus et netus. Accumsan lacus vel facilisis volutpat est velit egestas.\"\r\n    },\r\n    {\r\n      \"id\": 1618330460149,\r\n      \"dateLong\": \"Tue Apr 13 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"dateShort\": \"13/4/21\",\r\n      \"ticker\": \"TWTR\",\r\n      \"side\": \"long\",\r\n      \"tradeEntries\": [\r\n        [72.09, 60],\r\n        [72.24, 60]\r\n      ],\r\n      \"tradeExits\": [[73.21, 120]],\r\n      \"sharesAmount\": 120,\r\n      \"avgEntry\": 72.16,\r\n      \"avgExit\": 73.21,\r\n      \"returnCash\": 126,\r\n      \"returnPercent\": 1.76,\r\n      \"body\": \"Eu lobortis elementum nibh tellus molestie nunc non. Bibendum neque egestas congue quisque egestas diam in. Varius vel pharetra vel turpis nunc eget lorem. Ultrices sagittis orci a scelerisque. Quis eleifend quam adipiscing vitae proin. Risus feugiat in ante metus dictum at tempor. Urna condimentum mattis pellentesque id nibh tortor id aliquet lectus.\",\r\n      \"previousTicker\": \"TWTR\",\r\n      \"previousDateShort\": \"13/4/21\",\r\n      \"previousDateLong\": \"Tue Apr 13 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"total\": 7293\r\n    },\r\n    {\r\n      \"id\": 1618330625831,\r\n      \"dateLong\": \"Wed Apr 14 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"dateShort\": \"14/4/21\",\r\n      \"ticker\": \"OCGN\",\r\n      \"side\": \"short\",\r\n      \"tradeEntries\": [[6.68, 70]],\r\n      \"tradeExits\": [[7.14, 70]],\r\n      \"sharesAmount\": 70,\r\n      \"avgEntry\": 6.68,\r\n      \"avgExit\": 7.14,\r\n      \"returnCash\": -32.2,\r\n      \"returnPercent\": -0.44,\r\n      \"body\": \"\",\r\n      \"previousTicker\": \"OCGN\",\r\n      \"previousDateShort\": \"14/4/21\",\r\n      \"previousDateLong\": \"Wed Apr 14 2021 00:00:00 GMT+0100 (British Summer Time)\",\r\n      \"total\": 7261\r\n    }\r\n  ],\r\n  \"dummyJournal\": [\r\n    {\r\n      \"id\": \"\",\r\n      \"dateLong\": \"\",\r\n      \"dateShort\": \"\",\r\n      \"ticker\": \"\",\r\n      \"side\": \"\",\r\n      \"tradeEntries\": [[\"\", \"\"]],\r\n      \"tradeExits\": [[\"\", \"\"]],\r\n      \"sharesAmount\": \"\",\r\n      \"avgEntry\": \"\",\r\n      \"avgExit\": \"\",\r\n      \"returnCash\": \"\",\r\n      \"returnPercent\": \"\",\r\n      \"total\": \"\",\r\n      \"previousTicker\": \"\",\r\n      \"previousDateShort\": \"\",\r\n      \"previousDateLong\": \"\",\r\n      \"body\": \"\"\r\n    }\r\n  ]\r\n}\r\n;","import { stringifyNum } from './../helpers';\r\nimport { MONTHS_FORMAT } from './../config';\r\nimport jsonData from '../../data.json';\r\n\r\nlet user;\r\n\r\nconst startingUserObject = {\r\n  capital: 0,\r\n  initialCapital: 0,\r\n  newAccount: true,\r\n  overall: {\r\n    total: 0,\r\n    proportions: [\r\n      { side: 'long', total: 0 },\r\n      { side: 'short', total: 0 },\r\n    ],\r\n  },\r\n  streaks: {\r\n    wins: {\r\n      trades: [],\r\n    },\r\n    losses: {\r\n      trades: [],\r\n    },\r\n    current: {\r\n      trades: [],\r\n    },\r\n  },\r\n  worstTrades: [],\r\n  bestTrades: [],\r\n  tickers: {},\r\n  calendarData: {},\r\n  journal: [],\r\n  dummyJournal: [\r\n    {\r\n      id: '',\r\n      dateLong: '',\r\n      dateShort: '',\r\n      ticker: '',\r\n      side: '',\r\n      tradeEntries: [['', '']],\r\n      tradeExits: [['', '']],\r\n      sharesAmount: '',\r\n      avgEntry: '',\r\n      avgExit: '',\r\n      returnCash: '',\r\n      returnPercent: '',\r\n      total: '',\r\n      previousTicker: '',\r\n      previousDateShort: '',\r\n      previousDateLong: '',\r\n      body: '',\r\n    },\r\n  ],\r\n};\r\n\r\nexport const fetchUserFromJSON = function () {\r\n  user = startingUserObject;\r\n  if (jsonData) user = jsonData;\r\n  console.log(user);\r\n};\r\n\r\nexport const clearUserObject = function () {\r\n  user = startingUserObject;\r\n  console.log(user);\r\n};\r\n\r\nexport const checkIfJournalEmpty = function () {\r\n  if (user.journal.length < 1) return 'empty';\r\n  if (user.journal.length > 0) return 'full';\r\n};\r\n\r\nconst sortJournal = data =>\r\n  data.sort((a, b) => new Date(a.dateLong) - new Date(b.dateLong));\r\n\r\nconst addToOverall = function (newEntry, newEntryIndex, previousSide) {\r\n  if (newEntryIndex === -1) user.overall.total++;\r\n\r\n  if (previousSide === 'short' && newEntry.side === 'long') {\r\n    user.overall.proportions[0].total++;\r\n    user.overall.proportions[1].total--;\r\n    return;\r\n  }\r\n\r\n  if (previousSide === 'long' && newEntry.side === 'short') {\r\n    user.overall.proportions[0].total--;\r\n    user.overall.proportions[1].total++;\r\n    return;\r\n  }\r\n\r\n  if (newEntry.side === 'long') {\r\n    user.overall.proportions[0].total++;\r\n  }\r\n\r\n  if (newEntry.side === 'short') {\r\n    user.overall.proportions[1].total++;\r\n  }\r\n};\r\n\r\nconst compareToStreaks = function (newEntry) {\r\n  const streakObj = {\r\n    id: newEntry.id,\r\n    ticker: newEntry.ticker,\r\n    date: newEntry.dateShort,\r\n    returnCash: newEntry.returnCash,\r\n  };\r\n\r\n  // losing streak - checks whether the entry exists in the losing streak\r\n  const indexInLosses = user.streaks.losses.trades\r\n    ? user.streaks.losses.trades.map(loss => loss.id).indexOf(newEntry.id)\r\n    : -1;\r\n\r\n  // if the index exists and the new entry's cash return is smaller than zero, overwrite the index\r\n  if (indexInLosses !== -1 && newEntry.returnCash < 0) {\r\n    user.streaks.losses.trades[indexInLosses] = streakObj;\r\n  }\r\n\r\n  // if the index exists and the new entry's cash return is bigger than zero, remove the entry from losing streak\r\n  if (indexInLosses !== -1 && newEntry.returnCash > -1) {\r\n    user.streaks.losses.trades.splice(indexInLosses, 1);\r\n  }\r\n\r\n  // winning streak - checks whether the entry exists in the winning streak\r\n  const indexInWins = user.streaks.wins.trades\r\n    ? user.streaks.wins.trades.map(win => win.id).indexOf(newEntry.id)\r\n    : -1;\r\n\r\n  // if the index exists and the new entry's cash return is bigger than zero, overwrite the index\r\n  if (indexInWins !== -1 && newEntry.returnCash > -1) {\r\n    user.streaks.wins.trades[indexInWins] = streakObj;\r\n  }\r\n\r\n  // if the index exists and the new entry's cash return is smaller than zero, remove the entry from winning streak\r\n  if (indexInWins !== -1 && newEntry.returnCash < 0) {\r\n    user.streaks.wins.trades.splice(indexInWins, 1);\r\n  }\r\n\r\n  // current streak - checks whether the entry exists in the streak\r\n  const indexInCurrent = user.streaks.current.trades\r\n    ? user.streaks.current.trades.map(cur => cur.id).indexOf(newEntry.id)\r\n    : -1;\r\n\r\n  if (indexInCurrent !== -1) {\r\n    const currentStreakLength = user.streaks.current.trades.length;\r\n    // if the current streak is 1, overwrite the index as the new Entry already exists in the array\r\n    if (currentStreakLength === 1) {\r\n      user.streaks.current.trades[indexInCurrent] = streakObj;\r\n      return;\r\n    }\r\n    // checks if new Entry's cash return is positive and the previous or next element's cash return is also positive\r\n    // if this is the case, overwrite the index as the new Entry already exists in the array\r\n    if (\r\n      newEntry.returnCash > -1 &&\r\n      (user.streaks.current.trades[indexInCurrent - 1].returnCash > -1 ||\r\n        user.streaks.current.trades[indexInCurrent + 1].returnCash > -1)\r\n    ) {\r\n      user.streaks.current.trades[indexInCurrent] = streakObj;\r\n      return;\r\n    }\r\n\r\n    // checks if new Entry's cash return is positive and the previous or next element's cash return is negative\r\n    // if this is the case, the streak is broken, so remove the existing new entry index from the array\r\n    if (\r\n      newEntry.returnCash > -1 &&\r\n      (user.streaks.current.trades[indexInCurrent - 1].returnCash < 0 ||\r\n        user.streaks.current.trades[indexInCurrent + 1].returnCash < 0)\r\n    ) {\r\n      user.streaks.current.trades.splice(indexInCurrent, 1);\r\n      return;\r\n    }\r\n\r\n    // checks if new Entry's cash return is negative and the previous or next element's cash return is also negative\r\n    // if this is the case, overwrite the index as the new Entry already exists in the array\r\n    if (\r\n      newEntry.returnCash < 0 &&\r\n      (user.streaks.current.trades[indexInCurrent - 1].returnCash < 0 ||\r\n        user.streaks.current.trades[indexInCurrent + 1].returnCash < 0)\r\n    ) {\r\n      user.streaks.current.trades[indexInCurrent] = streakObj;\r\n      return;\r\n    }\r\n\r\n    // checks if new Entry's cash return is negative and the previous or next element's cash return is positive\r\n    // if this is the case, the streak is broken, so remove the existing new entry index from the array\r\n    if (\r\n      newEntry.returnCash < 0 &&\r\n      (user.streaks.current.trades[indexInCurrent - 1].returnCash > -1 ||\r\n        user.streaks.current.trades[indexInCurrent + 1].returnCash > -1)\r\n    ) {\r\n      user.streaks.current.trades.splice(indexInCurrent, 1);\r\n      return;\r\n    }\r\n  }\r\n\r\n  // check new entry against current streak\r\n  // the existing entries and the new entry are both positive/negative, so push to the array\r\n  if (\r\n    user.streaks.current.trades[0] &&\r\n    newEntry.returnCash > -1 &&\r\n    user.streaks.current.trades[0].returnCash > -1\r\n  ) {\r\n    user.streaks.current.trades.push(streakObj);\r\n  } else if (\r\n    // the existing entriees and the new entry are not both positive/negative, so override the array\r\n    user.streaks.current.trades[0] &&\r\n    newEntry.returnCash > -1 &&\r\n    user.streaks.current.trades[0].returnCash < 0\r\n  ) {\r\n    user.streaks.current.trades = [streakObj];\r\n  }\r\n\r\n  // the existing entries and the new entry are both positive/negative, so push to the array\r\n  if (\r\n    user.streaks.current.trades[0] &&\r\n    newEntry.returnCash < 0 &&\r\n    user.streaks.current.trades[0].returnCash < 0\r\n  ) {\r\n    user.streaks.current.trades.push(streakObj);\r\n  } else if (\r\n    // the existing entriees and the new entry are not both positive/negative, so override the array\r\n    user.streaks.current.trades[0] &&\r\n    newEntry.returnCash < 0 &&\r\n    user.streaks.current.trades[0].returnCash > -1\r\n  ) {\r\n    user.streaks.current.trades = [streakObj];\r\n  }\r\n\r\n  // compare the current streak to winning and losing streak\r\n  if (user.streaks.current.trades.length > 0) {\r\n    if (\r\n      // checks if the entries in the current streak are positive and if the current streak is longer than the winning streak\r\n      // if this is the case, the current streak becomes the new winning streak\r\n      user.streaks.current.trades[0].returnCash > -1 &&\r\n      user.streaks.current.trades.length > user.streaks.wins.trades.length + 1\r\n    ) {\r\n      user.streaks.wins.trades = user.streaks.current.trades;\r\n      return;\r\n    }\r\n\r\n    if (\r\n      // checks if the entries in the current streak are negative and if the current streak is longer than the losing streak\r\n      // if this is the case, the current streak becomes the new losing streak\r\n      user.streaks.current.trades[0].returnCash < 0 &&\r\n      user.streaks.current.trades.length > user.streaks.losses.trades.length + 1\r\n    ) {\r\n      user.streaks.losses.trades = user.streaks.current.trades;\r\n      return;\r\n    }\r\n  } else {\r\n    // if the current streak is empty, push the entry\r\n    user.streaks.current.trades.push(streakObj);\r\n  }\r\n};\r\n\r\nconst compareToWorstBest = function (newEntry) {\r\n  // best comparison\r\n  if (newEntry.returnCash > -1) {\r\n    const indexInBest = user.bestTrades\r\n      .map(trade => trade.id)\r\n      .indexOf(newEntry.id);\r\n\r\n    if (indexInBest !== -1) {\r\n      user.bestTrades[indexInBest] = newEntry;\r\n      user.bestTrades = user.bestTrades.sort(\r\n        (a, b) => b.returnCash - a.returnCash\r\n      );\r\n      return;\r\n    }\r\n\r\n    user.bestTrades.push({\r\n      id: newEntry.id,\r\n      dateLong: newEntry.dateLong,\r\n      dateShort: newEntry.dateShort,\r\n      ticker: newEntry.ticker,\r\n      returnCash: newEntry.returnCash,\r\n    });\r\n    user.bestTrades = user.bestTrades.sort(\r\n      (a, b) => b.returnCash - a.returnCash\r\n    );\r\n\r\n    if (user.bestTrades.length > 16) user.bestTrades.pop();\r\n  }\r\n  // worst comparison\r\n  if (newEntry.returnCash < 0) {\r\n    const indexInWorst = user.worstTrades\r\n      .map(trade => trade.id)\r\n      .indexOf(newEntry.id);\r\n\r\n    if (indexInWorst !== -1) {\r\n      user.worstTrades[indexInWorst] = newEntry;\r\n      user.worstTrades = user.worstTrades.sort(\r\n        (a, b) => a.returnCash - b.returnCash\r\n      );\r\n      return;\r\n    }\r\n\r\n    user.worstTrades.push({\r\n      id: newEntry.id,\r\n      dateLong: newEntry.dateLong,\r\n      dateShort: newEntry.dateShort,\r\n      ticker: newEntry.ticker,\r\n      returnCash: newEntry.returnCash,\r\n    });\r\n    user.worstTrades = user.worstTrades.sort(\r\n      (a, b) => a.returnCash - b.returnCash\r\n    );\r\n    if (user.worstTrades.length > 16) user.worstTrades.pop();\r\n  }\r\n};\r\n\r\nconst addToTickers = function (entry) {\r\n  // if the current ticker and previous ticker don't match, meaning the ticker has changed\r\n  if (\r\n    entry.ticker !== entry.previousTicker &&\r\n    entry.previousTicker.length > 0\r\n  ) {\r\n    let previousTicker = user.tickers[entry.previousTicker];\r\n\r\n    const tradesIndex = user.tickers[entry.previousTicker].trades\r\n      .map(trade => trade.id)\r\n      .indexOf(entry.id);\r\n    if (tradesIndex !== -1) {\r\n      user.tickers[entry.previousTicker].trades.splice(tradesIndex, 1);\r\n    }\r\n  }\r\n\r\n  entry.previousTicker = entry.ticker;\r\n\r\n  let currentTicker = user.tickers[entry.ticker];\r\n\r\n  // if the ticker already exists in the array\r\n  if (currentTicker) {\r\n    const indexInTrades = currentTicker.trades\r\n      .map(trade => trade.id)\r\n      .indexOf(entry.id);\r\n\r\n    if (indexInTrades !== -1) {\r\n      currentTicker.trades[indexInTrades] = {\r\n        id: entry.id,\r\n        shares: entry.sharesAmount,\r\n        returnCash: entry.returnCash,\r\n        returnPercent: entry.returnPercent,\r\n      };\r\n    }\r\n\r\n    if (indexInTrades === -1) {\r\n      currentTicker.trades.push({\r\n        id: entry.id,\r\n        shares: entry.sharesAmount,\r\n        returnCash: entry.returnCash,\r\n        returnPercent: entry.returnPercent,\r\n      });\r\n    }\r\n\r\n    currentTicker.avgReturn = +(\r\n      currentTicker.trades\r\n        .map(trade => trade.returnCash)\r\n        .reduce((acc, num) => acc + num, 0) / currentTicker.trades.length\r\n    ).toFixed(2);\r\n  }\r\n\r\n  // if the ticker is new\r\n  if (!currentTicker) {\r\n    user.tickers[entry.ticker] = {\r\n      ticker: entry.ticker,\r\n      avgReturn: entry.returnCash,\r\n      trades: [\r\n        {\r\n          id: entry.id,\r\n          shares: entry.sharesAmount,\r\n          returnCash: entry.returnCash,\r\n          returnPercent: entry.returnPercent,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n};\r\n\r\nconst addToCalendarData = function (entry) {\r\n  // if the currentDate and previousDate don't match, this means the date has changed\r\n  if (\r\n    entry.dateShort !== entry.previousDateShort &&\r\n    entry.previousDateShort.length > 0\r\n  ) {\r\n    const previousDateKey =\r\n      MONTHS_FORMAT[new Date(entry.previousDateLong).getMonth()] +\r\n      String(new Date(entry.previousDateLong).getFullYear()).slice(-2);\r\n\r\n    const previousDateIndex = user.calendarData[previousDateKey]\r\n      .map(day => day.dateShort)\r\n      .indexOf(entry.previousDateShort);\r\n\r\n    let tradeIndex;\r\n    if (previousDateIndex !== -1) {\r\n      tradeIndex = user.calendarData[previousDateKey][previousDateIndex].trades\r\n        .map(trade => trade.id)\r\n        .indexOf(entry.id);\r\n    }\r\n\r\n    if (tradeIndex !== -1) {\r\n      user.calendarData[previousDateKey][previousDateIndex].trades.splice(\r\n        tradeIndex,\r\n        1\r\n      );\r\n    }\r\n\r\n    // check if this was the last trade for the date\r\n    if (user.calendarData[previousDateKey][previousDateIndex].trades.length < 1)\r\n      user.calendarData[previousDateKey].splice(previousDateIndex, 1);\r\n\r\n    // check if month key doesn't have any more trades\r\n    if (user.calendarData[previousDateKey].length < 1)\r\n      delete user.calendarData[previousDateKey];\r\n  }\r\n\r\n  entry.previousDateShort = entry.dateShort;\r\n  entry.previousDateLong = entry.dateLong;\r\n\r\n  const dateKey =\r\n    MONTHS_FORMAT[new Date(entry.dateLong).getMonth()] +\r\n    String(new Date(entry.dateLong).getFullYear()).slice(-2);\r\n\r\n  const currentKey = user.calendarData[dateKey];\r\n  if (currentKey) {\r\n    const entryDateIndex = currentKey\r\n      .map(day => day.dateShort)\r\n      .indexOf(entry.dateShort);\r\n    if (entryDateIndex !== -1) {\r\n      currentKey[entryDateIndex].trades.push({\r\n        id: entry.id,\r\n        side: entry.side,\r\n        returnCash: entry.returnCash,\r\n        returnPercent: entry.returnPercent,\r\n        total: entry.total,\r\n      });\r\n    }\r\n    if (entryDateIndex === -1) {\r\n      currentKey.push({\r\n        dateLong: entry.dateLong,\r\n        dateShort: entry.dateShort,\r\n        trades: [\r\n          {\r\n            id: entry.id,\r\n            side: entry.side,\r\n            returnCash: entry.returnCash,\r\n            returnPercent: entry.returnPercent,\r\n            total: entry.total,\r\n          },\r\n        ],\r\n      });\r\n    }\r\n  }\r\n  if (!currentKey) {\r\n    user.calendarData[dateKey] = [\r\n      {\r\n        dateLong: entry.dateLong,\r\n        dateShort: entry.dateShort,\r\n        trades: [\r\n          {\r\n            id: entry.id,\r\n            side: entry.side,\r\n            returnCash: entry.returnCash,\r\n            returnPercent: entry.returnPercent,\r\n            total: entry.total,\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n  }\r\n};\r\n\r\nconst compareStatistics = function (entry, newEntryIndex, previousSide = '') {\r\n  addToOverall(entry, newEntryIndex, previousSide);\r\n  compareToStreaks(entry);\r\n  compareToWorstBest(entry);\r\n  addToTickers(entry);\r\n  addToCalendarData(entry);\r\n};\r\n\r\nexport const passData = function (field) {\r\n  return user[field];\r\n};\r\n\r\nexport const passNestedData = function (field, field2) {\r\n  if (field2) {\r\n    return { [field2]: user[field][field2] };\r\n  } else {\r\n    return user[field];\r\n  }\r\n};\r\n\r\nexport const updateCapital = function (amount = '', action = '') {\r\n  if (amount && action) {\r\n    if (action === 'minus') {\r\n      if (user.journal.length > 0) {\r\n        user.journal[user.journal.length - 1].total -= Math.round(amount);\r\n        user.capital = user.journal[user.journal.length - 1].total;\r\n      } else {\r\n        user.capital -= Math.round(amount);\r\n      }\r\n    }\r\n    if (action === 'plus') user.capital += Math.round(amount);\r\n    if (action === 'plus' && user.newAccount) {\r\n      user.initialCapital += Math.round(amount);\r\n      user.newAccount = false;\r\n    }\r\n    return [action, stringifyNum(amount), stringifyNum(user.capital)];\r\n  }\r\n  user.capital = Math.round(user.journal[user.journal.length - 1].total);\r\n};\r\n\r\nexport const updateCalendarData = function (obj) {\r\n  Object.keys(obj).forEach(key => {\r\n    user.calendarData[key] = obj[key];\r\n  });\r\n  return user.calendarData;\r\n};\r\n\r\nexport const updateJournalData = function (newEntry) {\r\n  const newEntryIndex = user.journal.map(e => e.id).indexOf(newEntry.id);\r\n  let previousSide;\r\n  // if the id already exists, meaning the journal entry has been updated\r\n  if (newEntryIndex !== -1) {\r\n    newEntry.total = user.capital;\r\n    previousSide = user.journal[newEntryIndex].side;\r\n    // previous tickers and dates\r\n    const previousTicker = user.journal[newEntryIndex].ticker;\r\n    const previousDateShort = user.journal[newEntryIndex].dateShort;\r\n    const previousDateLong = user.journal[newEntryIndex].dateLong;\r\n    user.journal[newEntryIndex] = newEntry;\r\n    user.journal[newEntryIndex].previousTicker = previousTicker;\r\n    user.journal[newEntryIndex].previousDateShort = previousDateShort;\r\n    user.journal[newEntryIndex].previousDateLong = previousDateLong;\r\n\r\n    sortJournal(user.journal);\r\n\r\n    updateJournalTradesTotals();\r\n    updateCapital();\r\n  }\r\n\r\n  // newEntryIndex is -1, meaning the journal entry is new\r\n  if (newEntryIndex === -1) {\r\n    user.journal.push(newEntry);\r\n    // sort the data\r\n    sortJournal(user.journal);\r\n    updateJournalTradesTotals();\r\n    updateCapital();\r\n  }\r\n  compareStatistics(newEntry, newEntryIndex, previousSide);\r\n\r\n  return [user.capital];\r\n};\r\n\r\nconst updateJournalTradesTotals = function () {\r\n  user.journal.forEach((trade, index, arr) => {\r\n    if (index != 0) {\r\n      user.journal[index].total =\r\n        user.journal[index - 1].total + trade.returnCash;\r\n      console.log('trade', trade, 'index', index);\r\n      // return;\r\n    } else {\r\n      console.log('trade', trade, 'index', index);\r\n      user.journal[index].total = user.initialCapital + trade.returnCash;\r\n    }\r\n  });\r\n};\r\n\r\nexport const findJournalEntry = function (id) {\r\n  if (!id) return;\r\n  return user.journal.filter(entry => entry.id === id);\r\n};\r\n\r\n// ZONE - deleting an entry\r\n\r\nexport const targetSelectedEntry = function (entryID) {\r\n  // const [foundEntry] = user.journal.filter(entry => entry.id === entryID);\r\n  const IndexInJournal = user.journal\r\n    .map(journal => journal.id)\r\n    .indexOf(entryID);\r\n  const foundEntry = user.journal[IndexInJournal];\r\n\r\n  // journal\r\n  user.journal.splice(IndexInJournal, 1);\r\n\r\n  sortJournal(user.journal);\r\n  updateCapital();\r\n  updateJournalTradesTotals();\r\n\r\n  // overall\r\n  if (foundEntry.side === 'short') user.overall.proportions[1].total--;\r\n  if (foundEntry.side === 'long') user.overall.proportions[0].total--;\r\n  user.overall.total--;\r\n\r\n  // streaks\r\n  const indexInWinsStreak = user.streaks.wins.trades\r\n    .map(trade => trade.id)\r\n    .indexOf(entryID);\r\n  if (indexInWinsStreak !== -1)\r\n    user.streaks.wins.trades.splice(indexInWinsStreak, 1);\r\n  const indexInLossStreak = user.streaks.losses.trades\r\n    .map(trade => trade.id)\r\n    .indexOf(entryID);\r\n  if (indexInLossStreak !== -1)\r\n    user.streaks.losses.trades.splice(indexInWinsStreak, 1);\r\n  const indexInCurrentStreak = user.streaks.current.trades\r\n    .map(trade => trade.id)\r\n    .indexOf(entryID);\r\n  if (indexInCurrentStreak !== -1)\r\n    user.streaks.current.trades.splice(indexInCurrentStreak, 1);\r\n\r\n  // worst and best trades\r\n  const indexInWorst = user.worstTrades.map(trade => trade.id).indexOf(entryID);\r\n  if (indexInWorst !== -1) user.worstTrades.splice(indexInWorst, 1);\r\n  const indexInBest = user.bestTrades.map(trade => trade.id).indexOf(entryID);\r\n  if (indexInBest !== -1) user.bestTrades.splice(indexInBest, 1);\r\n\r\n  // tickers\r\n  const indexInTickers = user.tickers[foundEntry.ticker].trades\r\n    .map(trade => trade.id)\r\n    .indexOf(entryID);\r\n  if (indexInTickers !== -1)\r\n    user.tickers[foundEntry.ticker].trades.splice(indexInTickers, 1);\r\n\r\n  // calendar data\r\n\r\n  const dateKey =\r\n    MONTHS_FORMAT[new Date(foundEntry.dateLong).getMonth()] +\r\n    String(new Date(foundEntry.dateLong).getFullYear()).slice(-2);\r\n\r\n  const indexInCalendar = user.calendarData[dateKey]\r\n    .map(day => day.dateShort)\r\n    .indexOf(foundEntry.dateShort);\r\n\r\n  if (indexInCalendar !== -1) {\r\n    const indexInTrades = user.calendarData[dateKey][indexInCalendar].trades\r\n      .map(trade => trade.id)\r\n      .indexOf(entryID);\r\n    if (indexInTrades !== -1)\r\n      user.calendarData[dateKey][indexInCalendar].trades.splice(\r\n        indexInTrades,\r\n        1\r\n      );\r\n  }\r\n\r\n  // check if this was the last trade for the date\r\n  if (user.calendarData[dateKey][indexInCalendar].trades.length < 1)\r\n    user.calendarData[dateKey].splice(indexInCalendar, 1);\r\n\r\n  // check if month key doesn't have any more trades\r\n  if (user.calendarData[dateKey].length < 1) delete user.calendarData[dateKey];\r\n\r\n  console.log(user);\r\n};\r\n\r\nexport const saveToLocalStorage = function () {\r\n  localStorage.setItem('TikerData', JSON.stringify(user));\r\n  console.log(user);\r\n};\r\n","let coreEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.core = document.querySelector('.js-core');\r\n  obj.nav = obj.core.querySelector('.js-nav');\r\n  obj.loadingScreen = obj.core.querySelector('.js-loading');\r\n  obj.singleBtnPopup = obj.core.querySelector('.js-single-btn-popup');\r\n  obj.doubleBtnPopup = obj.core.querySelector('.js-double-btn-popup');\r\n  obj.singleBtnPopupOkBtn = obj.core.querySelector('.js-popup-ok-btn');\r\n  obj.doubleBtnPopupYesBtn = obj.core.querySelector('.js-popup-yes-btn');\r\n  obj.doubleBtnPopupNoBtn = obj.core.querySelector('.js-popup-no-btn');\r\n  obj.sectionOverview = obj.core.querySelector('.js-section-overview');\r\n  obj.sectionMonthly = obj.core.querySelector('.js-section-monthly');\r\n  obj.sectionJournal = obj.core.querySelector('.js-section-journal');\r\n  obj.sectionCalculators = obj.core.querySelector('.js-section-calculators');\r\n  obj.sectionSettings = obj.core.querySelector('.js-section-settings');\r\n  obj.sectionHelp = obj.core.querySelector('.js-section-help');\r\n  obj.performanceChart = obj.core.querySelector('.js-chart-performance');\r\n  obj.overallChart = obj.core.querySelector('.js-chart-overall');\r\n  obj.tableProfitable = obj.core.querySelector('.js-table-profitable');\r\n  obj.worstBestChart = obj.core.querySelector('.js-chart-worst-best');\r\n  return obj;\r\n};\r\n\r\nconst hideAllSections = function () {\r\n  [\r\n    coreEls.sectionOverview,\r\n    coreEls.sectionMonthly,\r\n    coreEls.sectionJournal,\r\n    coreEls.sectionCalculators,\r\n    coreEls.sectionSettings,\r\n    coreEls.sectionHelp,\r\n  ].forEach(section => section.classList.add('s-core-hidden-section'));\r\n};\r\n\r\nconst toggleActiveNavBtns = function (targetEl) {\r\n  coreEls.nav\r\n    .querySelector('.btn--nav--active')\r\n    .classList.remove('btn--nav--active');\r\n  targetEl.classList.add('btn--nav--active');\r\n};\r\n\r\nexport const showSingleBtnPopup = function (...messages) {\r\n  coreEls.singleBtnPopup.classList.add('s-content__popup--active');\r\n\r\n  const popupContentWrapper = coreEls.singleBtnPopup.children[0];\r\n\r\n  messages.forEach(message => {\r\n    const html = `\r\n      <p class=\"s-content__popup-text\">${message}</p>\r\n    `;\r\n    popupContentWrapper.insertAdjacentHTML('afterbegin', html);\r\n  });\r\n};\r\n\r\nexport const showDoubleBtnPopup = function (\r\n  entryID = '',\r\n  source = '',\r\n  ...messages\r\n) {\r\n  coreEls.doubleBtnPopup.classList.add('s-content__popup--active');\r\n  coreEls.doubleBtnPopup.setAttribute('source', source);\r\n  coreEls.doubleBtnPopup.setAttribute('entry-id', entryID);\r\n\r\n  const popupContentWrapper = coreEls.doubleBtnPopup.children[0];\r\n\r\n  messages.forEach(message => {\r\n    const html = `\r\n      <p class=\"s-content__popup-text\">${message}</p>\r\n    `;\r\n    popupContentWrapper.insertAdjacentHTML('afterbegin', html);\r\n  });\r\n};\r\n\r\nexport const hidePopup = function () {\r\n  const activePopup = coreEls.core.querySelector('.s-content__popup--active');\r\n  if (activePopup) {\r\n    activePopup.children[0]\r\n      .querySelectorAll('p')\r\n      .forEach(text => text.remove());\r\n    activePopup.classList.remove('s-content__popup--active');\r\n  }\r\n};\r\n\r\nexport const removeLoadingScreen = function () {\r\n  coreEls.loadingScreen.remove();\r\n};\r\n\r\nexport const queryCoreEls = function () {\r\n  coreEls = getElements();\r\n};\r\n\r\nexport const addNavigationHandler = function (handler) {\r\n  coreEls.nav.addEventListener('click', e => handler(e.target));\r\n};\r\n\r\nexport const addPopupHandler = function (handler) {\r\n  coreEls.singleBtnPopupOkBtn.addEventListener('click', e => {\r\n    e.preventDefault();\r\n    handler('hide');\r\n  });\r\n  coreEls.singleBtnPopup.children[0].addEventListener('click', e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  });\r\n  coreEls.singleBtnPopup.addEventListener('click', e => {\r\n    e.preventDefault();\r\n    handler('hide');\r\n  });\r\n\r\n  coreEls.doubleBtnPopupNoBtn.addEventListener('click', e => {\r\n    e.preventDefault();\r\n    handler('hide');\r\n  });\r\n  coreEls.doubleBtnPopupYesBtn.addEventListener('click', e => {\r\n    e.stopPropagation();\r\n    handler(\r\n      'proceed',\r\n      coreEls.doubleBtnPopup.getAttribute('source'),\r\n      coreEls.doubleBtnPopup.getAttribute('entry-id')\r\n    );\r\n  });\r\n  coreEls.doubleBtnPopup.children[0].addEventListener('click', e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  });\r\n  coreEls.doubleBtnPopup.addEventListener('click', e => {\r\n    e.preventDefault();\r\n    handler('hide');\r\n  });\r\n};\r\n\r\nexport const toggleSections = function (targetEl) {\r\n  if (targetEl.classList.contains('js-nav-overview-btn')) {\r\n    hidePopup();\r\n    hideAllSections();\r\n    coreEls.sectionOverview.classList.remove('s-core-hidden-section');\r\n    toggleActiveNavBtns(targetEl);\r\n    return 'rerender';\r\n  }\r\n  if (targetEl.classList.contains('js-nav-monthly-btn')) {\r\n    hidePopup();\r\n    hideAllSections();\r\n    coreEls.sectionMonthly.classList.remove('s-core-hidden-section');\r\n    toggleActiveNavBtns(targetEl);\r\n  }\r\n  if (targetEl.classList.contains('js-nav-journal-btn')) {\r\n    hidePopup();\r\n    hideAllSections();\r\n    coreEls.sectionJournal.classList.remove('s-core-hidden-section');\r\n    toggleActiveNavBtns(targetEl);\r\n  }\r\n  if (targetEl.classList.contains('js-nav-calculators-btn')) {\r\n    hidePopup();\r\n    hideAllSections();\r\n    coreEls.sectionCalculators.classList.remove('s-core-hidden-section');\r\n    toggleActiveNavBtns(targetEl);\r\n  }\r\n  if (targetEl.classList.contains('js-nav-settings-btn')) {\r\n    hidePopup();\r\n    hideAllSections();\r\n    coreEls.sectionSettings.classList.remove('s-core-hidden-section');\r\n    toggleActiveNavBtns(targetEl);\r\n  }\r\n  if (targetEl.classList.contains('js-nav-help-btn')) {\r\n    hidePopup();\r\n    hideAllSections();\r\n    coreEls.sectionHelp.classList.remove('s-core-hidden-section');\r\n    toggleActiveNavBtns(targetEl);\r\n  }\r\n  if (targetEl.classList.contains('js-nav-exit-btn')) {\r\n    hidePopup();\r\n    showDoubleBtnPopup(\r\n      '',\r\n      'logoff',\r\n      'All unsaved progress will be lost',\r\n      'Are you sure you want to log off?'\r\n    );\r\n  }\r\n};\r\n\r\nexport const redirectToLogin = function () {\r\n  hidePopup();\r\n  window.location.href = '../../index.html';\r\n};\r\n\r\nexport const showNoDataScreens = function () {\r\n  [\r\n    coreEls.performanceChart,\r\n    coreEls.overallChart,\r\n    coreEls.tableProfitable,\r\n    coreEls.worstBestChart,\r\n  ].forEach(card => card.classList.add('s-content__no-data'));\r\n};\r\n\r\nexport const hideNoDataScreens = function () {\r\n  [\r\n    coreEls.performanceChart,\r\n    coreEls.overallChart,\r\n    coreEls.tableProfitable,\r\n    coreEls.worstBestChart,\r\n  ].forEach(card => card.classList.remove('s-content__no-data'));\r\n};\r\n","let calculatorEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.calcPosition = document.querySelector('.js-calc-position');\r\n  obj.positionEntryPrice = obj.calcPosition.querySelector(\r\n    '.js-calc-position-entry'\r\n  );\r\n  obj.positionRiskPercentage = obj.calcPosition.querySelector(\r\n    '.js-calc-position-percentage'\r\n  );\r\n  obj.positionStopPrice = obj.calcPosition.querySelector(\r\n    '.js-calc-position-stop'\r\n  );\r\n  obj.positionResult = obj.calcPosition.querySelector(\r\n    '.js-calc-position-result'\r\n  );\r\n  obj.calcRatio = document.querySelector('.js-calc-ratio');\r\n  obj.ratioEntryPrice = obj.calcRatio.querySelector('.js-calc-ratio-entry');\r\n  obj.ratioExitPrice = obj.calcRatio.querySelector('.js-calc-ratio-exit');\r\n  obj.ratioStopPrice = obj.calcRatio.querySelector('.js-calc-ratio-stop');\r\n  obj.ratioResult = obj.calcRatio.querySelector('.js-calc-ratio-result');\r\n  obj.calcCapital = document.querySelector('.js-calc-capital');\r\n  obj.capitalSign = obj.calcCapital.querySelector('.js-calc-capital-sign');\r\n  obj.capitalSignBtn = obj.calcCapital.querySelector(\r\n    '.js-calc-capital-sign-btn'\r\n  );\r\n  obj.capitalInput = obj.calcCapital.querySelector('.js-calc-capital-input');\r\n  obj.capitalUpdateBtn = obj.calcCapital.querySelector(\r\n    '.js-calc-capital-update-btn'\r\n  );\r\n  obj.capitalMessage = obj.calcCapital.querySelector(\r\n    '.js-calc-capital-message'\r\n  );\r\n  return obj;\r\n};\r\n\r\nexport const queryCalcEls = function () {\r\n  calculatorEls = getElements();\r\n};\r\n\r\nconst checkFieldsForData = function (el1, el2, el3) {\r\n  if (!el1.value || !el2.value || !el3.value) return;\r\n  return [+el1.value, +el2.value, +el3.value];\r\n};\r\n\r\nexport const addCalcCapitalHandler = function (handler) {\r\n  calculatorEls.capitalUpdateBtn.addEventListener('click', e => {\r\n    const amount = +calculatorEls.capitalInput.value;\r\n    if (!amount || isNaN(amount)) return;\r\n    handler(amount, calculatorEls.capitalSign.getAttribute('data-action'));\r\n  });\r\n  calculatorEls.capitalSignBtn.addEventListener('click', e => {\r\n    if (\r\n      e.target.previousElementSibling.getAttribute('data-action') === 'plus'\r\n    ) {\r\n      calculatorEls.capitalSign.innerHTML = `\r\n      <svg class=\"svg svg--minus\" viewBox=\"0 0 13 13\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <rect y=\"5\" width=\"13\" height=\"3\" fill=\"#C4C4C4\"/>\r\n      </svg>\r\n      `;\r\n      calculatorEls.capitalSign.setAttribute('data-action', 'minus');\r\n    } else {\r\n      calculatorEls.capitalSign.innerHTML = `\r\n      <svg class=\"svg svg--plus\" viewBox=\"0 0 13 13\"\r\n        xmlns=\"http://www.w3.org/2000/svg\">\r\n        <rect y=\"5\" width=\"13\" height=\"3\" fill=\"#C4C4C4\" />\r\n        <rect x=\"8\" width=\"13\" height=\"3\" transform=\"rotate(90 8 0)\" fill=\"#C4C4C4\" />\r\n      </svg>\r\n      `;\r\n      calculatorEls.capitalSign.setAttribute('data-action', 'plus');\r\n    }\r\n  });\r\n};\r\n\r\nexport const addCalcPositionHandler = function (handler) {\r\n  [\r\n    calculatorEls.positionEntryPrice,\r\n    calculatorEls.positionRiskPercentage,\r\n    calculatorEls.positionStopPrice,\r\n  ].forEach(input => {\r\n    input.addEventListener('keyup', e => {\r\n      if (e.key === 'Tab' || (!isFinite(e.key) && e.key !== 'Backspace'))\r\n        return;\r\n\r\n      const formattedData = checkFieldsForData(\r\n        calculatorEls.positionEntryPrice,\r\n        calculatorEls.positionRiskPercentage,\r\n        calculatorEls.positionStopPrice\r\n      );\r\n      handler(formattedData);\r\n    });\r\n  });\r\n};\r\n\r\nexport const addCalcRatioHandler = function (handler) {\r\n  [\r\n    calculatorEls.ratioEntryPrice,\r\n    calculatorEls.ratioExitPrice,\r\n    calculatorEls.ratioStopPrice,\r\n  ].forEach(input => {\r\n    input.addEventListener('keyup', e => {\r\n      if (e.key === 'Tab' || (!isFinite(e.key) && e.key !== 'Backspace'))\r\n        return;\r\n\r\n      const formattedData = checkFieldsForData(\r\n        calculatorEls.ratioEntryPrice,\r\n        calculatorEls.ratioExitPrice,\r\n        calculatorEls.ratioStopPrice\r\n      );\r\n      handler(formattedData);\r\n    });\r\n  });\r\n};\r\n\r\nexport const renderCapitalMessage = function (arr) {\r\n  const spanEls = calculatorEls.capitalMessage.querySelectorAll('span');\r\n  spanEls[0].textContent = arr[0] === 'plus' ? 'added' : 'removed';\r\n  spanEls[1].textContent = arr[1];\r\n  spanEls[2].textContent = arr[2];\r\n  calculatorEls.capitalMessage.classList.add(\r\n    'c-calculator-capital__message--is-active'\r\n  );\r\n  setTimeout(() => {\r\n    calculatorEls.capitalMessage.classList.remove(\r\n      'c-calculator-capital__message--is-active'\r\n    );\r\n    calculatorEls.capitalInput.value = '';\r\n  }, 6000);\r\n};\r\n\r\nexport const renderCalcResult = function (result, el) {\r\n  calculatorEls[el].value = result;\r\n};\r\n\r\nexport const clearCalcResult = function (el) {\r\n  calculatorEls[el].value = '';\r\n};\r\n","import { makeAbsolute } from '../helpers';\r\n\r\nexport const calcPositionResult = function (accountCapital, dataArr) {\r\n  const [entry, risk, stop] = dataArr;\r\n  const moneyRisk = accountCapital * (risk * 0.01);\r\n  const stopDistance = makeAbsolute(entry - stop);\r\n  return stopDistance !== 0 ? Math.round(moneyRisk / stopDistance) : 0;\r\n};\r\n\r\nexport const calcRatioResult = function (dataArr) {\r\n  const [entry, exit, stop] = dataArr;\r\n  if (dataArr.sort((a, b) => a - b).indexOf(entry) !== 1) return;\r\n  const exitDistance = makeAbsolute(exit - entry);\r\n  const stopDistance = makeAbsolute(entry - stop);\r\n  return (exitDistance / stopDistance).toFixed(2);\r\n};\r\n","let monthlyEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.monthlyTable = document.querySelector('.js-monthly-table');\r\n  obj.monthlyTableHead = obj.monthlyTable.querySelector(\r\n    '.js-monthly-table-head'\r\n  );\r\n  return obj;\r\n};\r\n\r\nexport const queryMonthlyEls = function () {\r\n  monthlyEls = getElements();\r\n};\r\n\r\nexport const renderMonthlyTable = function (data) {\r\n  if (monthlyEls.monthlyTableRows) {\r\n    Array.from(monthlyEls.monthlyTableRows).forEach(row => row.remove());\r\n  }\r\n\r\n  const keys = Object.keys(data);\r\n  const sortedKeys = keys\r\n    .map(key => [key, data[key].dateLong])\r\n    .sort((a, b) => new Date(a[1]) - new Date(b[1]))\r\n    .map(key => key[0]);\r\n\r\n  sortedKeys.forEach(key => {\r\n    const current = data[key];\r\n    const html = `\r\n    <tr class=\"js-table-monthly-row\">\r\n        <th>${current.total.month}</th>\r\n        <td class=\"${\r\n          current.total.monthlyReturn >= 0 ? '' : 'negative'\r\n        }\">${current.total.monthlyReturn.toFixed(2)}</td>\r\n        <td>${current.total.totalTrades}</td>\r\n        <td class=\"${current.total.avgReturn >= 0 ? '' : 'negative'}\">${\r\n      current.total.avgReturn\r\n    }</td>\r\n        <td>${+current.total.avgWinPercent}%</td>\r\n        <td>${+current.total.avgLossPercent}%</td>\r\n        <td>${+current.total.battingAvg}%</td>\r\n        <td>${current.total.winLossRatio}</td>\r\n    </tr>\r\n    <tr class=\"js-table-monthly-row\">\r\n        <th>${current.long.side}</th>\r\n        <td class=\"${\r\n          current.long.monthlyReturn >= 0 ? '' : 'negative'\r\n        }\">${current.long.monthlyReturn.toFixed(2)}</td>\r\n        <td>${current.long.totalTrades}</td>\r\n        <td class=\"${current.long.avgReturn >= 0 ? '' : 'negative'}\">${\r\n      current.long.avgReturn\r\n    }</td>\r\n        <td>${+current.long.avgWinPercent}%</td>\r\n        <td>${+current.long.avgLossPercent}%</td>\r\n        <td>${+current.long.battingAvg}%</td>\r\n        <td>${current.long.winLossRatio}</td>\r\n    </tr>\r\n    <tr class=\"s-monthly__table-unit js-table-monthly-row\">\r\n        <th>${current.short.side}</th>\r\n        <td class=\"${\r\n          current.short.monthlyReturn >= 0 ? '' : 'negative'\r\n        }\">${current.short.monthlyReturn.toFixed(2)}</td>\r\n        <td>${current.short.totalTrades}</td>\r\n        <td class=\"${current.short.avgReturn >= 0 ? '' : 'negative'}\">${\r\n      current.short.avgReturn\r\n    }</td>\r\n        <td>${+current.short.avgWinPercent}%</td>\r\n        <td>${+current.short.avgLossPercent}%</td>\r\n        <td>${+current.short.battingAvg}%</td>\r\n        <td>${current.short.winLossRatio}</td>\r\n    </tr>\r\n    `;\r\n    monthlyEls.monthlyTableHead.insertAdjacentHTML('afterend', html);\r\n    monthlyEls.monthlyTableRows = monthlyEls.monthlyTable.querySelectorAll(\r\n      '.js-table-monthly-row'\r\n    );\r\n  });\r\n};\r\n","import { kFormatter } from '../helpers';\r\n\r\nlet profitableEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.profitableTable = document.querySelector('.js-profitable-table');\r\n  obj.profitableTableHead = obj.profitableTable.querySelector(\r\n    '.js-profitable-table-head'\r\n  );\r\n  return obj;\r\n};\r\n\r\nexport const queryProfitableEls = function () {\r\n  profitableEls = getElements();\r\n};\r\n\r\nexport const renderProfitableTable = function (tableData) {\r\n  profitableEls.profitableTableHead.parentElement\r\n    .querySelectorAll('tr:not(:first-child)')\r\n    .forEach(row => row.remove());\r\n\r\n  Object.keys(tableData).forEach(data => {\r\n    const ticker = tableData[data];\r\n    const html = `\r\n        <tr>\r\n            <th>${data}</th>\r\n            <td>${ticker.totalProfit}</td>\r\n            <td>${ticker.totalTrades}/${kFormatter(\r\n      ticker.totalShares,\r\n      9999\r\n    )}</td>\r\n            <td>${ticker.avgReturn}</td>\r\n            <td>${ticker.avgWinPercent}</td>\r\n            <td>${ticker.battingAvgPercent}</td>\r\n            <td>${ticker.winLossRatio}</td>\r\n        </tr>\r\n      `;\r\n    profitableEls.profitableTableHead.insertAdjacentHTML('afterend', html);\r\n  });\r\n};\r\n","import { kFormatter } from '../helpers';\r\n\r\nlet overallEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.pieStreakCard = document.querySelector('.js-pie-streak');\r\n  obj.shortLongCanvas = document.querySelector('.js-pie-canvas');\r\n  obj.winStreakDate = obj.pieStreakCard.querySelector('.js-win-streak-date');\r\n  obj.winStreakTotal = obj.pieStreakCard.querySelector('.js-win-streak-total');\r\n  obj.winStreakProfit = obj.pieStreakCard.querySelector(\r\n    '.js-win-streak-profit'\r\n  );\r\n  obj.lossStreakDate = obj.pieStreakCard.querySelector('.js-loss-streak-date');\r\n  obj.lossStreakTotal = obj.pieStreakCard.querySelector(\r\n    '.js-loss-streak-total'\r\n  );\r\n  obj.lossStreakProfit = obj.pieStreakCard.querySelector(\r\n    '.js-loss-streak-profit'\r\n  );\r\n  obj.overallTradesNumber = obj.pieStreakCard.querySelector(\r\n    '.js-overall-trades-number'\r\n  );\r\n  obj.shortPositions = obj.pieStreakCard.querySelector('.js-short-positions');\r\n  obj.longPositions = obj.pieStreakCard.querySelector('.js-long-positions');\r\n  return obj;\r\n};\r\n\r\nexport const queryOverallEls = function () {\r\n  overallEls = getElements();\r\n};\r\n\r\nexport const clearLongShortCanvas = function () {\r\n  overallEls.shortLongCanvas.innerHTML = '';\r\n};\r\n\r\nexport const renderLongShortStats = function (data) {\r\n  overallEls.overallTradesNumber.textContent = data.total ? data.total : 0;\r\n\r\n  if (data.proportions && data.proportions[0]) {\r\n    overallEls.longPositions.textContent = `${data.proportions[0].total} - ${(\r\n      (data.proportions[0].total / (data.total > 0 ? data.total : 1)) *\r\n      100\r\n    ).toFixed(1)}%`;\r\n  } else {\r\n    overallEls.longPositions.textContent = '0 - 0%';\r\n  }\r\n\r\n  if (data.proportions && data.proportions[1]) {\r\n    overallEls.shortPositions.textContent = `${data.proportions[1].total} - ${(\r\n      (data.proportions[1].total / (data.total > 0 ? data.total : 1)) *\r\n      100\r\n    ).toFixed(1)}%`;\r\n  } else {\r\n    overallEls.shortPositions.textContent = '0 - 0%';\r\n  }\r\n};\r\n\r\nexport const renderStreaks = function (data) {\r\n  overallEls.winStreakTotal.textContent = data.wins.trades\r\n    ? data.wins.trades.length\r\n    : 0;\r\n  overallEls.winStreakProfit.textContent = data.wins.trades\r\n    ? data.wins.trades\r\n        .map(trade => trade.returnCash)\r\n        .reduce((acc, num) => acc + num, 0)\r\n    : 0;\r\n\r\n  overallEls.winStreakDate.textContent = `${\r\n    data.wins.trades.length > 0 ? data.wins.trades[0].date : 'xx/xx/xx'\r\n  } - ${\r\n    data.wins.trades.length > 0\r\n      ? data.wins.trades[data.wins.trades.length - 1].date\r\n      : 'xx/xx/xx'\r\n  }`;\r\n\r\n  overallEls.lossStreakTotal.textContent = data.losses.trades\r\n    ? data.losses.trades.length\r\n    : 0;\r\n\r\n  overallEls.lossStreakProfit.textContent = data.losses.trades\r\n    ? data.losses.trades\r\n        .map(trade => trade.returnCash)\r\n        .reduce((acc, num) => acc + num, 0)\r\n    : 0;\r\n\r\n  overallEls.lossStreakDate.textContent = `${\r\n    data.losses.trades.length > 0 ? data.losses.trades[0].date : 'xx/xx/xx'\r\n  } - ${\r\n    data.losses.trades.length > 0\r\n      ? data.losses.trades[data.losses.trades.length - 1].date\r\n      : 'xx/xx/xx'\r\n  }`;\r\n};\r\n\r\n// ZONE - D3\r\nlet pieData = [];\r\n\r\nexport const renderLongShortPie = function (passedData) {\r\n  if (passedData) {\r\n    pieData = passedData;\r\n    clearLongShortCanvas();\r\n  } else {\r\n    passedData = pieData;\r\n  }\r\n\r\n  const canvasRect = overallEls.shortLongCanvas.getBoundingClientRect();\r\n\r\n  // create room for axes\r\n  const margin = { top: 0, right: 0, bottom: 0, left: 0 };\r\n  const graphWidth = canvasRect.width - margin.left - margin.right;\r\n  const graphHeight = canvasRect.height - margin.top - margin.bottom;\r\n  const graphRadius = canvasRect.height / 2.4;\r\n  const graphCenter = { x: graphWidth / 2, y: graphHeight / 2 };\r\n  let totalTrades;\r\n  if (passedData[1]) {\r\n    totalTrades = passedData[0].total + passedData[1].total;\r\n  } else {\r\n    totalTrades = passedData[0];\r\n  }\r\n\r\n  const svg = d3\r\n    .select('.js-pie-canvas')\r\n    .append('svg')\r\n    .attr('width', '100%')\r\n    .attr('height', graphHeight);\r\n\r\n  // create a group to contain all graph elements\r\n  const graph = svg\r\n    .append('g')\r\n    .attr('transform', `translate(${graphCenter.x}, ${graphCenter.y})`);\r\n\r\n  const pie = d3\r\n    .pie()\r\n    .sort(null)\r\n    .value(d => d.total);\r\n\r\n  // arc generator needs to know the start and end angles, which is why we created the pie function\r\n  const arcPath = d3\r\n    .arc()\r\n    .outerRadius(graphRadius)\r\n    .innerRadius(graphRadius / 4);\r\n\r\n  // ZONE - update function\r\n  const updateLongShortPie = function (passedData) {\r\n    // join enhanced pie data to path elements\r\n    const paths = graph.selectAll('path').data(pie(passedData));\r\n\r\n    // remove unwanted paths\r\n    paths.exit().remove();\r\n\r\n    // enter elements\r\n    paths\r\n      .enter()\r\n      .append('path')\r\n      .attr('class', 'pie-section')\r\n      .attr('d', arcPath);\r\n\r\n    // existing DOM elements\r\n    paths.attr('d', arcPath);\r\n  };\r\n  updateLongShortPie(passedData);\r\n};\r\n","// import { reduce } from 'core-js/core/array';\r\nimport { crunchData, reduceData, filterNonStrings } from '../helpers';\r\n\r\nconst createPlaceholderObj = function (key) {\r\n  return {\r\n    dateLong: '',\r\n    total: {\r\n      month: key,\r\n      monthlyReturn: [0],\r\n      totalTrades: 0,\r\n      avgReturn: [],\r\n      avgWinPercent: [],\r\n      avgLossPercent: [],\r\n      profitableNumber: 0,\r\n      battingAvg: 0,\r\n      winLossRatio: [],\r\n    },\r\n    long: {\r\n      side: 'long',\r\n      monthlyReturn: [0],\r\n      totalTrades: 0,\r\n      avgReturn: [],\r\n      avgWinPercent: [],\r\n      avgLossPercent: [],\r\n      profitableNumber: 0,\r\n      battingAvg: [],\r\n      winLossRatio: [],\r\n    },\r\n    short: {\r\n      side: 'short',\r\n      monthlyReturn: [0],\r\n      totalTrades: 0,\r\n      avgReturn: [],\r\n      avgWinPercent: [],\r\n      avgLossPercent: [],\r\n      profitableNumber: 0,\r\n      battingAvg: [],\r\n      winLossRatio: [],\r\n    },\r\n  };\r\n};\r\n\r\nconst calcBattingAvg = function (profitable, total) {\r\n  if (!profitable) profitable = 0;\r\n  if (!total) total = 1;\r\n  return Math.round((profitable / total) * 100);\r\n};\r\n\r\nconst calcWinLossRatio = function (profitable, total) {\r\n  if (!profitable) profitable = 0;\r\n  if (!total) total = 1;\r\n  if (profitable === total) total++;\r\n  return (profitable / total).toFixed(2);\r\n};\r\n\r\nexport const computeMonthlyData = function (rawData) {\r\n  const formattedMonths = {};\r\n  const keys = Object.keys(rawData);\r\n\r\n  keys.forEach(key => {\r\n    const currentMonth = rawData[key];\r\n    let tableUnit = createPlaceholderObj(key);\r\n\r\n    tableUnit.dateLong = currentMonth[0].dateLong;\r\n\r\n    // grab all the trades from that month and flatten into one array\r\n    const flattenedDays = currentMonth.map(day => day.trades).flat();\r\n    tableUnit.total.totalTrades = flattenedDays.length;\r\n\r\n    flattenedDays.forEach(trade => {\r\n      let currentSide; // decides which object to add data to\r\n      if (trade.side === 'long') currentSide = tableUnit.long;\r\n      else if (trade.side === 'short') currentSide = tableUnit.short;\r\n      currentSide.monthlyReturn.push(trade.returnCash); // monthly return\r\n      currentSide.totalTrades++; // total trades\r\n      currentSide.avgReturn.push(trade.returnCash); // avg Return\r\n      // avg win and loss %\r\n      if (trade.returnPercent >= 0) {\r\n        currentSide.avgWinPercent.push(trade.returnPercent);\r\n        tableUnit.total.profitableNumber++;\r\n        currentSide.profitableNumber++;\r\n      } else if (trade.returnPercent <= 0) {\r\n        currentSide.avgLossPercent.push(trade.returnPercent);\r\n      }\r\n    });\r\n\r\n    // crunch the array data into single numbers\r\n    tableUnit.long.monthlyReturn = reduceData(tableUnit.long.monthlyReturn);\r\n    tableUnit.long.avgReturn = crunchData(tableUnit.long.avgReturn);\r\n    tableUnit.long.avgWinPercent = crunchData(tableUnit.long.avgWinPercent);\r\n    tableUnit.long.avgLossPercent = crunchData(tableUnit.long.avgLossPercent);\r\n\r\n    tableUnit.short.monthlyReturn = reduceData(tableUnit.short.avgReturn);\r\n    tableUnit.short.avgReturn = crunchData(tableUnit.short.avgReturn);\r\n    tableUnit.short.avgWinPercent = crunchData(tableUnit.short.avgWinPercent);\r\n    tableUnit.short.avgLossPercent = crunchData(tableUnit.short.avgLossPercent);\r\n\r\n    tableUnit.total.monthlyReturn = reduceData([\r\n      tableUnit.long.monthlyReturn,\r\n      tableUnit.short.monthlyReturn,\r\n    ]);\r\n    tableUnit.total.avgReturn = crunchData(\r\n      filterNonStrings([tableUnit.long.avgReturn, tableUnit.short.avgReturn])\r\n    );\r\n    tableUnit.total.avgWinPercent = crunchData(\r\n      filterNonStrings([\r\n        tableUnit.long.avgWinPercent,\r\n        tableUnit.short.avgWinPercent,\r\n      ])\r\n    );\r\n    tableUnit.total.avgLossPercent = crunchData(\r\n      filterNonStrings([\r\n        tableUnit.long.avgLossPercent,\r\n        tableUnit.short.avgLossPercent,\r\n      ])\r\n    );\r\n\r\n    // batting avg %\r\n    tableUnit.long.battingAvg = calcBattingAvg(\r\n      tableUnit.long.profitableNumber,\r\n      tableUnit.long.totalTrades\r\n    );\r\n\r\n    tableUnit.short.battingAvg = calcBattingAvg(\r\n      tableUnit.short.profitableNumber,\r\n      tableUnit.short.totalTrades\r\n    );\r\n\r\n    tableUnit.total.battingAvg = calcBattingAvg(\r\n      tableUnit.total.profitableNumber,\r\n      tableUnit.total.totalTrades\r\n    );\r\n\r\n    // win loss ratio\r\n    tableUnit.long.winLossRatio = calcWinLossRatio(\r\n      tableUnit.long.profitableNumber,\r\n      tableUnit.long.totalTrades\r\n    );\r\n\r\n    tableUnit.short.winLossRatio = calcWinLossRatio(\r\n      tableUnit.short.profitableNumber,\r\n      tableUnit.short.totalTrades\r\n    );\r\n\r\n    tableUnit.total.winLossRatio = calcWinLossRatio(\r\n      tableUnit.total.profitableNumber,\r\n      tableUnit.total.totalTrades\r\n    );\r\n\r\n    formattedMonths[key] = tableUnit;\r\n  });\r\n  return formattedMonths;\r\n};\r\n","const convertToLeader = function (data) {\r\n  const ticker = data.ticker;\r\n  const formattedLeader = {\r\n    totalTrades: data.trades.length,\r\n    profitable: 0,\r\n    totalProfit: 0,\r\n    totalShares: 0,\r\n    avgReturn: 0,\r\n    avgWinPercent: 0,\r\n    battingAvgPercent: 0,\r\n    winLossRatio: 0,\r\n  };\r\n\r\n  const current = formattedLeader;\r\n\r\n  const tradeResults = data.trades.map(trade => trade.returnCash);\r\n  const totalProfit = tradeResults.reduce((acc, num) => acc + num, 0);\r\n  const totalShares = data.trades\r\n    .map(trade => trade.shares)\r\n    .reduce((acc, num) => acc + num, 0);\r\n  const winPercentTrades = data.trades\r\n    .map(trade => trade.returnPercent)\r\n    .filter(percent => percent >= 0);\r\n\r\n  current.totalProfit = totalProfit;\r\n  current.totalShares = totalShares;\r\n  current.avgReturn = +(totalProfit / current.totalTrades).toFixed(0);\r\n  current.avgWinPercent = (\r\n    winPercentTrades.reduce((acc, num) => acc + num) / winPercentTrades.length\r\n  ).toFixed(2);\r\n  current.profitable = winPercentTrades.length;\r\n  current.battingAvgPercent = +(\r\n    (current.profitable / current.totalTrades) *\r\n    100\r\n  ).toFixed(2);\r\n  current.winLossRatio = +(\r\n    current.profitable /\r\n    (current.totalTrades - current.profitable)\r\n  ).toFixed(2);\r\n  if (!isFinite(current.winLossRatio)) current.winLossRatio = 1;\r\n  return formattedLeader;\r\n};\r\n\r\nexport const computeProfitableData = function (tickerData) {\r\n  const sortedTickers = Object.values(tickerData).sort(\r\n    (a, b) => a.avgReturn - b.avgReturn\r\n  );\r\n\r\n  const topSix = sortedTickers\r\n    .filter(ticker => ticker.trades.length > 2)\r\n    .splice(0, 7);\r\n\r\n  let leadersArray = {};\r\n  topSix.forEach(leader => {\r\n    if (leader.avgReturn > 0) {\r\n      const leaderFormat = convertToLeader(leader);\r\n      leadersArray[leader.ticker] = leaderFormat;\r\n    }\r\n  });\r\n  return leadersArray;\r\n};\r\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export {default as path} from \"./path.js\";\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1  r0, da1  da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sectors outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and its a circular sector?\n      // Or perhaps its an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sectors inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = (data = array(data)).length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport line from \"./line.js\";\n\nexport function lineRadial(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nexport default function() {\n  return lineRadial(line().curve(curveRadialLinear));\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport area from \"./area.js\";\nimport {lineRadial} from \"./lineRadial.js\";\n\nexport default function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n}\n","export default function(x, y) {\n  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"../array.js\";\nimport constant from \"../constant.js\";\nimport {x as pointX, y as pointY} from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nexport function linkVertical() {\n  return link(curveVertical);\n}\n\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","import {pi, tau} from \"../math.js\";\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n","var tan30 = Math.sqrt(1 / 3),\n    tan30_2 = tan30 * 2;\n\nexport default {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","import {pi, tau} from \"../math.js\";\n\nvar ka = 0.89081309152928522810,\n    kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10),\n    kx = Math.sin(tau / 10) * kr,\n    ky = -Math.cos(tau / 10) * kr;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var w = Math.sqrt(size),\n        x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","var c = -0.5,\n    s = Math.sqrt(3) / 2,\n    k = 1 / Math.sqrt(12),\n    a = (k / 2 + 1) * 3;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","import {path} from \"d3-path\";\nimport circle from \"./symbol/circle.js\";\nimport cross from \"./symbol/cross.js\";\nimport diamond from \"./symbol/diamond.js\";\nimport star from \"./symbol/star.js\";\nimport square from \"./symbol/square.js\";\nimport triangle from \"./symbol/triangle.js\";\nimport wye from \"./symbol/wye.js\";\nimport constant from \"./constant.js\";\n\nexport var symbols = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\nexport default function(type, size) {\n  var context = null;\n  type = typeof type === \"function\" ? type : constant(type || circle);\n  size = typeof size === \"function\" ? size : constant(size === undefined ? 64 : +size);\n\n  function symbol() {\n    var buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n","class Bump {\n  constructor(context, x) {\n    this._context = context;\n    this._x = x;\n  }\n  areaStart() {\n    this._line = 0;\n  }\n  areaEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  }\n  point(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: {\n        this._point = 1;\n        if (this._line) this._context.lineTo(x, y);\n        else this._context.moveTo(x, y);\n        break;\n      }\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._x) this._context.bezierCurveTo(this._x0 = (this._x0 + x) / 2, this._y0, this._x0, y, x, y);\n        else this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + y) / 2, x, this._y0, x, y);\n        break;\n      }\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nexport function bumpX(context) {\n  return new Bump(context, true);\n}\n\nexport function bumpY(context) {\n  return new Bump(context, false);\n}\n","import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nfunction stackSeries(key) {\n  const series = [];\n  series.key = key;\n  return series;\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var sz = Array.from(keys.apply(this, arguments), stackSeries),\n        i, n = sz.length, j = -1,\n        oz;\n\n    for (const d of data) {\n      for (i = 0, ++j; i < n; ++i) {\n        (sz[i][j] = [0, +value(d, sz[i].key, j, data)]).data = d;\n      }\n    }\n\n    for (i = 0, oz = array(order(sz)); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) > 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = 0, d[1] = dy;\n      }\n    }\n  }\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var peaks = series.map(peak);\n  return none(series).sort(function(a, b) { return peaks[a] - peaks[b]; });\n}\n\nfunction peak(series) {\n  var i = -1, j = 0, n = series.length, vi, vj = -Infinity;\n  while (++i < n) if ((vi = +series[i][1]) > vj) vj = vi, j = i;\n  return j;\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(series) {\n  return ascending(series).reverse();\n}\n","import appearance from \"./appearance.js\";\nimport {sum} from \"./ascending.js\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = appearance(series),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","export {default as arc} from \"./arc.js\";\nexport {default as area} from \"./area.js\";\nexport {default as line} from \"./line.js\";\nexport {default as pie} from \"./pie.js\";\nexport {default as areaRadial, default as radialArea} from \"./areaRadial.js\"; // Note: radialArea is deprecated!\nexport {default as lineRadial, default as radialLine} from \"./lineRadial.js\"; // Note: radialLine is deprecated!\nexport {default as pointRadial} from \"./pointRadial.js\";\nexport {linkHorizontal, linkVertical, linkRadial} from \"./link/index.js\";\n\nexport {default as symbol, symbols} from \"./symbol.js\";\nexport {default as symbolCircle} from \"./symbol/circle.js\";\nexport {default as symbolCross} from \"./symbol/cross.js\";\nexport {default as symbolDiamond} from \"./symbol/diamond.js\";\nexport {default as symbolSquare} from \"./symbol/square.js\";\nexport {default as symbolStar} from \"./symbol/star.js\";\nexport {default as symbolTriangle} from \"./symbol/triangle.js\";\nexport {default as symbolWye} from \"./symbol/wye.js\";\n\nexport {default as curveBasisClosed} from \"./curve/basisClosed.js\";\nexport {default as curveBasisOpen} from \"./curve/basisOpen.js\";\nexport {default as curveBasis} from \"./curve/basis.js\";\nexport {bumpX as curveBumpX, bumpY as curveBumpY} from \"./curve/bump.js\";\nexport {default as curveBundle} from \"./curve/bundle.js\";\nexport {default as curveCardinalClosed} from \"./curve/cardinalClosed.js\";\nexport {default as curveCardinalOpen} from \"./curve/cardinalOpen.js\";\nexport {default as curveCardinal} from \"./curve/cardinal.js\";\nexport {default as curveCatmullRomClosed} from \"./curve/catmullRomClosed.js\";\nexport {default as curveCatmullRomOpen} from \"./curve/catmullRomOpen.js\";\nexport {default as curveCatmullRom} from \"./curve/catmullRom.js\";\nexport {default as curveLinearClosed} from \"./curve/linearClosed.js\";\nexport {default as curveLinear} from \"./curve/linear.js\";\nexport {monotoneX as curveMonotoneX, monotoneY as curveMonotoneY} from \"./curve/monotone.js\";\nexport {default as curveNatural} from \"./curve/natural.js\";\nexport {default as curveStep, stepAfter as curveStepAfter, stepBefore as curveStepBefore} from \"./curve/step.js\";\n\nexport {default as stack} from \"./stack.js\";\nexport {default as stackOffsetExpand} from \"./offset/expand.js\";\nexport {default as stackOffsetDiverging} from \"./offset/diverging.js\";\nexport {default as stackOffsetNone} from \"./offset/none.js\";\nexport {default as stackOffsetSilhouette} from \"./offset/silhouette.js\";\nexport {default as stackOffsetWiggle} from \"./offset/wiggle.js\";\nexport {default as stackOrderAppearance} from \"./order/appearance.js\";\nexport {default as stackOrderAscending} from \"./order/ascending.js\";\nexport {default as stackOrderDescending} from \"./order/descending.js\";\nexport {default as stackOrderInsideOut} from \"./order/insideOut.js\";\nexport {default as stackOrderNone} from \"./order/none.js\";\nexport {default as stackOrderReverse} from \"./order/reverse.js\";\n","import { path } from 'd3-path';\r\nimport { curveLinearClosed } from 'd3-shape';\r\nimport { kFormatter } from '../helpers';\r\n\r\nlet performanceEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.performanceCanvas = document.querySelector('.js-performance-canvas');\r\n  obj.performanceDayBtn = document.querySelector('.js-performance-btn-day');\r\n  obj.performanceMonthBtn = document.querySelector('.js-performance-btn-month');\r\n  obj.performanceHeading = document.querySelector('.js-performance-heading');\r\n  return obj;\r\n};\r\n\r\nexport const queryPerformanceEls = function () {\r\n  performanceEls = getElements();\r\n};\r\n\r\nexport const addPerformanceRenderHandler = function (handler) {\r\n  [\r\n    performanceEls.performanceDayBtn,\r\n    performanceEls.performanceMonthBtn,\r\n  ].forEach(btn =>\r\n    btn.addEventListener('click', e => {\r\n      btn.parentElement\r\n        .querySelectorAll('button')\r\n        .forEach(b => b.classList.remove('btn--tertiary--active'));\r\n      e.target.classList.add('btn--tertiary--active');\r\n      handler(e.target.getAttribute('data-type'));\r\n    })\r\n  );\r\n};\r\n\r\nconst updatePerformanceHeading = function (type) {\r\n  performanceEls.performanceHeading.querySelector('span').textContent = type;\r\n};\r\n\r\nexport const clearPerformanceCanvas = function () {\r\n  performanceEls.performanceCanvas.innerHTML = '';\r\n};\r\n\r\nlet chartData = [];\r\nlet chartType;\r\n\r\n// ZONE - D3\r\nexport const renderPerformanceChart = function (passedData) {\r\n  let type, data;\r\n  if (passedData) {\r\n    type = passedData[0];\r\n    data = passedData[1].slice(0, 16);\r\n    updatePerformanceHeading(type);\r\n    clearPerformanceCanvas();\r\n  }\r\n\r\n  if (data) {\r\n    (chartData = [...data]), (chartType = type);\r\n  } else {\r\n    (data = chartData), (type = chartType);\r\n  }\r\n\r\n  const canvasRect = performanceEls.performanceCanvas.getBoundingClientRect();\r\n\r\n  // create room for axes\r\n  const margin = { top: 25, right: 20, bottom: 50, left: 60 };\r\n  const graphWidth = canvasRect.width - margin.left - margin.right;\r\n  const graphHeight = canvasRect.height - margin.top - margin.bottom;\r\n\r\n  // create svg container, specify width & height, translate to create room for axes labels\r\n  const svg = d3\r\n    .select('.js-performance-canvas')\r\n    .append('svg')\r\n    .attr('class', 'performance-canvas')\r\n    .attr('viewBox', `0 0 ${canvasRect.width} ${canvasRect.height}`);\r\n\r\n  // create a group for our graph elements and append it to our svg\r\n  const graph = svg\r\n    .append('g')\r\n    .attr('width', graphWidth)\r\n    .attr('height', graphHeight)\r\n    .attr('transform', `translate(${margin.left}, ${margin.top})`);\r\n\r\n  // create scales\r\n  const x = d3.scaleLinear().range([0, graphWidth]);\r\n  const y = d3.scaleLinear().range([graphHeight, 0]);\r\n\r\n  // create axes groups\r\n  const xAxisGroup = graph\r\n    .append('g')\r\n    .attr('transform', `translate(0, ${graphHeight})`)\r\n    .attr('class', 'performance-axis-x');\r\n  const yAxisGroup = graph.append('g').attr('class', 'performance-axis-y');\r\n\r\n  // set up d3 line graph generator\r\n  // it will generate a line, based on our data points\r\n  // it returns a long string that is then used for 'd' attribute of the svg path\r\n  const line = d3\r\n    .line()\r\n    .x(function (d) {\r\n      return x(d.position);\r\n    })\r\n    .y(function (d) {\r\n      return y(d.total);\r\n    });\r\n\r\n  // create line path element\r\n  const path = graph.append('path');\r\n\r\n  // ZONE - update function\r\n  const updatePerformanceChart = function (data = chartData) {\r\n    // create responsive gaps for the chart\r\n    const maxMinVals = d3.extent(data, d => d.total);\r\n    const gap = Math.round((maxMinVals[1] - maxMinVals[0]) / 6);\r\n\r\n    // set scale domains\r\n    // x.domain(d3.extent(data, d => d.position)); // find the lowest and highest dates, return in array format\r\n    x.domain([\r\n      d3.min(data, d => d.position) - 0.5,\r\n      d3.max(data, d => d.position) + 0.5,\r\n    ]);\r\n    y.domain([\r\n      d3.min(data, d => d.total) - gap,\r\n      d3.max(data, d => d.total) + gap,\r\n    ]); // find the highest value\r\n\r\n    // update path data\r\n    // when we are using d3 line, we need to pass the data inside of another array\r\n    path.data([data]).attr('d', line).attr('class', 'performance-line');\r\n\r\n    // create circles for objects\r\n    // join data to the selection\r\n    const circles = graph.selectAll('circle').data(data);\r\n\r\n    // remove unwanted points\r\n    circles.exit().remove();\r\n\r\n    // add new points\r\n    circles\r\n      .enter()\r\n      .append('circle')\r\n      .attr('cx', d => x(d.position))\r\n      .attr('cy', d => {\r\n        return y(Math.round(d.total));\r\n      })\r\n      .attr('class', 'performance-circles');\r\n\r\n    // update current points\r\n    circles\r\n      .attr('cx', d => x(d.position))\r\n      .attr('cy', d => y(Math.round(d.total)));\r\n\r\n    // create axes\r\n    const xAxis = d3\r\n      .axisBottom(x)\r\n      .ticks(data.length)\r\n      .tickFormat(d => data[d].dateShort);\r\n    // .tickFormat(d => (data[d - 1] ? data[d - 1].dateShort : '')); // create bottom axis based on our x scale\r\n\r\n    const yAxis = d3\r\n      .axisLeft(y)\r\n      .ticks(4)\r\n      .tickFormat(d => kFormatter(d, 999, ''));\r\n\r\n    // generate all shapes for xAxis and yAxis and place them in axis groups\r\n    xAxisGroup.call(xAxis);\r\n    yAxisGroup.call(yAxis);\r\n\r\n    // ZONE - generate horizontal lines\r\n\r\n    const yAxisTicks = performanceEls.performanceCanvas.querySelectorAll(\r\n      'g.performance-axis-y g.tick'\r\n    );\r\n    const yTicksTranslates = Array.from(yAxisTicks).map(t =>\r\n      t.getAttribute('transform')\r\n    );\r\n\r\n    const horizontalLinesGroup = graph.append('g');\r\n\r\n    for (let i = 0; i < yTicksTranslates.length; i++) {\r\n      const horizontalLine = horizontalLinesGroup\r\n        .append('line')\r\n        .attr('class', 'performance-graph-line')\r\n        .attr('x1', 0)\r\n        .attr('x2', graphWidth)\r\n        .attr('y1', 0)\r\n        .attr('y2', 0)\r\n        .attr('transform', yTicksTranslates[i]);\r\n    }\r\n\r\n    // ZONE - create circle labels\r\n    const points = Array.from(\r\n      performanceEls.performanceCanvas.querySelectorAll(\r\n        'circle.performance-circles'\r\n      )\r\n    );\r\n    const pointsCoords = points.map(point => [\r\n      point.getAttribute('cx'),\r\n      point.getAttribute('cy'),\r\n    ]);\r\n\r\n    const labelsGroup = graph.append('g');\r\n\r\n    for (let i = 0; i < pointsCoords.length; i++) {\r\n      const label = labelsGroup\r\n        .append('text')\r\n        .text(kFormatter(data[i].total, 9999))\r\n        .attr(\r\n          'class',\r\n          `${\r\n            data[i].returnCash >= 0\r\n              ? 'performance-label'\r\n              : 'performance-label--negative'\r\n          }`\r\n        )\r\n        .attr(\r\n          'transform',\r\n          `translate(${pointsCoords[i][0] - 20}, ${\r\n            pointsCoords[i][1] - (data[i].returnCash >= 0 ? 15 : -25)\r\n          })`\r\n        );\r\n    }\r\n\r\n    // select x axis text and translate down every odd text to make space\r\n    xAxisGroup\r\n      .selectAll('g.tick:nth-child(odd) text')\r\n      .attr('transform', 'translate(0, 18)')\r\n      .attr('class', 'performance-axis-odd');\r\n  };\r\n\r\n  // change the buttons accordingly\r\n  [\r\n    performanceEls.performanceDayBtn,\r\n    performanceEls.performanceMonthBtn,\r\n  ].forEach(btn => btn.classList.remove('btn--tertiary--active'));\r\n  if (type === 'Daily')\r\n    performanceEls.performanceDayBtn.classList.add('btn--tertiary--active');\r\n  if (type === 'Monthly')\r\n    performanceEls.performanceMonthBtn.classList.add('btn--tertiary--active');\r\n\r\n  updatePerformanceChart(data);\r\n};\r\n","const formatShortDate = function (dateShort) {\r\n  const splitDate = dateShort.split('/');\r\n  splitDate.shift();\r\n  return splitDate.join('/');\r\n};\r\n\r\nconst formatMonthlyData = function (calendarData, journal) {\r\n  let monthsArr = [];\r\n\r\n  Object.keys(calendarData).forEach(monthKey => {\r\n    monthsArr.push(calendarData[monthKey].map(day => day.trades));\r\n  });\r\n\r\n  let formattedMonthsArr = [];\r\n\r\n  monthsArr.forEach(month => {\r\n    const returnCash = month\r\n      .flat()\r\n      .map(item => item.returnCash)\r\n      .reduce((acc, num) => acc + num, 0);\r\n    const dateLong = month[0].dateLong;\r\n    const dateShort = formatShortDate(month[0].dateShort);\r\n    const lastDay = month[month.length - 1];\r\n\r\n    const lastTradeIndexInJournal = journal\r\n      .map(trade => trade.id)\r\n      .indexOf(lastDay[lastDay.length - 1].id);\r\n\r\n    formattedMonthsArr.push({\r\n      returnCash,\r\n      dateLong,\r\n      dateShort,\r\n      total: Math.round(journal[lastTradeIndexInJournal].total),\r\n    });\r\n  });\r\n\r\n  formattedMonthsArr.sort(\r\n    (a, b) => new Date(a.dateLong) - new Date(b.dateLong)\r\n  );\r\n\r\n  formattedMonthsArr.forEach((month, index) => {\r\n    month.position = index;\r\n  });\r\n\r\n  return formattedMonthsArr;\r\n};\r\n\r\nconst formatDailyData = function (calendarData, journal) {\r\n  let daysArr = [];\r\n\r\n  Object.keys(calendarData).forEach(monthKey => {\r\n    daysArr.push(\r\n      ...calendarData[monthKey].map(day => {\r\n        day.trades.dateShort = day.dateShort;\r\n        day.trades.dateLong = day.dateLong;\r\n        return day.trades;\r\n      })\r\n    );\r\n  });\r\n\r\n  let formattedDaysArr = daysArr.map(day => {\r\n    const returnCash = day\r\n      .map(trade => {\r\n        if (trade.returnCash) return trade.returnCash;\r\n      })\r\n      .reduce((acc, num) => acc + num, 0);\r\n\r\n    const lastTradeIndexInJournal = journal\r\n      .map(trade => trade.id)\r\n      .indexOf(day[day.length - 1].id);\r\n\r\n    return {\r\n      dateShort: day.dateShort,\r\n      dateLong: day.dateLong,\r\n      returnCash,\r\n      total: Math.round(journal[lastTradeIndexInJournal].total),\r\n    };\r\n  });\r\n\r\n  formattedDaysArr.sort((a, b) => new Date(a.dateLong) - new Date(b.dateLong));\r\n\r\n  formattedDaysArr.forEach((day, index) => {\r\n    day.position = index;\r\n  });\r\n\r\n  return formattedDaysArr;\r\n};\r\n\r\nexport const formatPerformanceData = function (\r\n  calendarData,\r\n  capital,\r\n  journal,\r\n  type\r\n) {\r\n  if (type === 'day')\r\n    return ['Daily', formatDailyData(calendarData, journal, capital)];\r\n  if (type === 'month')\r\n    return ['Monthly', formatMonthlyData(calendarData, journal, capital)];\r\n};\r\n","import { kFormatter } from '../helpers';\r\n\r\nlet bestWorstEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.bestWorstCanvas = document.querySelector('.js-worst-best-canvas');\r\n  obj.worstBtn = document.querySelector('.js-worst-btn');\r\n  obj.bestBtn = document.querySelector('.js-best-btn');\r\n  return obj;\r\n};\r\n\r\nexport const queryBestWorstEls = function () {\r\n  bestWorstEls = getElements();\r\n};\r\n\r\nexport const clearWorstBestCanvas = function () {\r\n  bestWorstEls.bestWorstCanvas.innerHTML = '';\r\n};\r\n\r\nexport const addWorstBestRenderHandler = function (handler) {\r\n  [bestWorstEls.worstBtn, bestWorstEls.bestBtn].forEach(btn => {\r\n    btn.addEventListener('click', e => {\r\n      btn.parentElement\r\n        .querySelectorAll('button')\r\n        .forEach(b => b.classList.remove('btn--tertiary--active'));\r\n      e.target.classList.add('btn--tertiary--active');\r\n      handler(e.target.getAttribute('data-type'));\r\n    });\r\n  });\r\n};\r\n\r\n// ZONE - D3\r\nlet chartData = [];\r\nlet chartType;\r\n\r\nexport const renderWorstBestChart = function (passedData) {\r\n  let type, data;\r\n  if (passedData) {\r\n    type = passedData[0];\r\n    data = passedData[1];\r\n    clearWorstBestCanvas();\r\n  }\r\n\r\n  if (data) {\r\n    (chartData = [...data]), (chartType = type);\r\n  } else {\r\n    (data = chartData), (type = chartType);\r\n  }\r\n\r\n  const determineSign = function (data) {\r\n    if (type === 'worst') return -Math.abs(data);\r\n    return Math.abs(data);\r\n  };\r\n\r\n  const canvasRect = bestWorstEls.bestWorstCanvas.getBoundingClientRect();\r\n\r\n  // create room for axes\r\n  const margin = { top: 25, right: 20, bottom: 50, left: 50 };\r\n  const graphWidth = canvasRect.width - margin.left - margin.right;\r\n  const graphHeight = canvasRect.height - margin.top - margin.bottom;\r\n\r\n  // create svg container, specify width & height, translate to create room for axes labels\r\n  const svg = d3\r\n    .select('.js-worst-best-canvas')\r\n    .append('svg')\r\n    .attr('class', 'worst-best-canvas')\r\n    .attr('viewBox', `0 0 ${canvasRect.width} ${canvasRect.height}`);\r\n\r\n  // create graph for the elements and append it to our svg\r\n  const graph = svg\r\n    .append('g')\r\n    .attr('width', graphWidth)\r\n    .attr('height', graphHeight)\r\n    .attr('transform', `translate(${margin.left}, ${margin.top})`);\r\n\r\n  // create scales\r\n  const y = d3.scaleLinear().range([graphHeight, 0]);\r\n  const x = d3\r\n    .scaleBand()\r\n    .range([0, graphWidth])\r\n    .paddingInner(0.5)\r\n    .paddingOuter(0.5);\r\n\r\n  // create a group for the x and y axis\r\n  const xAxisGroup = graph\r\n    .append('g')\r\n    .attr('transform', `translate(0, ${graphHeight})`)\r\n    .attr('class', 'worst-best-axis-x');\r\n  const yAxisGroup = graph.append('g').attr('class', 'worst-best-axis-y');\r\n\r\n  // create and call the axes\r\n  const xAxis = d3.axisBottom(x).tickFormat(d => d);\r\n  const yAxis = d3\r\n    .axisLeft(y)\r\n    .ticks(6)\r\n    .tickFormat(d => {\r\n      if (type === 'worst') return -Math.abs(kFormatter(d, 9999));\r\n      if (type === 'best') return Math.abs(kFormatter(d, 9999));\r\n    });\r\n\r\n  // ZONE - update function\r\n  const updateWorstBestChart = function (data = chartData) {\r\n    // create responsive gap for the chart\r\n    const maxMinVals = d3.extent(data, d => d.returnCash);\r\n    const gap = Math.round((maxMinVals[1] - maxMinVals[0]) / 6);\r\n\r\n    // set scale domains\r\n    y.domain([0, d3.max(data, d => d.returnCash) + gap]);\r\n    x.domain(data.map(item => item.ticker));\r\n\r\n    // join data to rectangles inside our graph group\r\n    const rects = graph.selectAll('rect').data(data);\r\n\r\n    // remove any unwanted shapes\r\n    rects.exit().remove();\r\n\r\n    // update already existing rectangles in DOM\r\n    rects\r\n      .attr('width', x.bandwidth)\r\n      .attr('y', d => y(total))\r\n      .attr('fill', 'orange');\r\n\r\n    // update and append virtual elements\r\n    rects\r\n      .enter()\r\n      .append('rect')\r\n      .attr('width', x.bandwidth < 62 ? x.bandwidth : 62)\r\n      .attr('height', 0)\r\n      .attr('y', graphHeight)\r\n      .attr('x', d => x(d.ticker))\r\n      .attr('fill', 'orange')\r\n      .attr('height', d => graphHeight - y(d.returnCash))\r\n      .attr('y', d => y(d.returnCash))\r\n      .attr('class', 'worst-best-bars');\r\n\r\n    // apply axes to axes groups\r\n    xAxisGroup.call(xAxis);\r\n    yAxisGroup.call(yAxis);\r\n\r\n    // ZONE - create bars labels\r\n    const bars = Array.from(\r\n      bestWorstEls.bestWorstCanvas.querySelectorAll('rect.worst-best-bars')\r\n    );\r\n    const barsDimensions = bars.map(bar => [\r\n      bar.getAttribute('x'),\r\n      bar.getAttribute('y'),\r\n      bar.getAttribute('width'),\r\n      bar.getAttribute('height'),\r\n    ]);\r\n\r\n    const labelsGroup = graph.append('g');\r\n\r\n    for (let i = 0; i < barsDimensions.length; i++) {\r\n      labelsGroup\r\n        .append('text')\r\n        .text(kFormatter(determineSign(data[i].returnCash), 9999))\r\n        .attr('class', `${type === 'best' ? 'best' : 'worst'}-trades-label`)\r\n        .attr(\r\n          'transform',\r\n          `translate(${barsDimensions[i][0]}, ${barsDimensions[i][1] - 10})`\r\n        );\r\n\r\n      labelsGroup\r\n        .append('text')\r\n        .text(data[i].dateShort)\r\n        .attr('class', 'worst-best-date')\r\n        .attr(\r\n          'transform',\r\n          `translate(${barsDimensions[i][0] - 8}, ${\r\n            graphHeight - 10\r\n          }) rotate(-90)`\r\n        );\r\n    }\r\n\r\n    // ZONE - create horizontal line on the x axis to cover the bars borders\r\n    const xOverlayLineGroup = graph.append('g');\r\n    xOverlayLineGroup\r\n      .append('line')\r\n      .attr('x1', 0)\r\n      .attr('x2', graphWidth)\r\n      .attr('y1', graphHeight)\r\n      .attr('y2', graphHeight)\r\n      .attr('class', 'worst-best-overlay-line');\r\n\r\n    // select x axis text and translate down every odd text to make space\r\n    xAxisGroup\r\n      .selectAll('g.tick:nth-child(odd) text')\r\n      .attr('transform', 'translate(0, 18)');\r\n\r\n    // change the buttons accordingly\r\n    [bestWorstEls.worstBtn, bestWorstEls.bestBtn].forEach(btn =>\r\n      btn.classList.remove('btn--tertiary--active')\r\n    );\r\n    if (type === 'worst')\r\n      bestWorstEls.worstBtn.classList.add('btn--tertiary--active');\r\n    if (type === 'best')\r\n      bestWorstEls.bestBtn.classList.add('btn--tertiary--active');\r\n  };\r\n  updateWorstBestChart(data);\r\n};\r\n","export const formatWorstBestData = function (type, stocksData) {\r\n  if (type === 'worst') {\r\n    const dataCopy = [];\r\n    stocksData.forEach(stock => dataCopy.push({ ...stock }));\r\n    dataCopy.forEach(stock => (stock.returnCash = Math.abs(stock.returnCash)));\r\n    return ['worst', dataCopy];\r\n  }\r\n  if (type === 'best') return ['best', stocksData];\r\n};\r\n","let detailsEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.capitalOutput = document.querySelector('.js-capital-output span');\r\n  return obj;\r\n};\r\n\r\nexport const queryDetailsEls = function () {\r\n  detailsEls = getElements();\r\n};\r\n\r\nexport const updateCapitalOutput = function (capitalData) {\r\n  detailsEls.capitalOutput.textContent = capitalData ? capitalData : 0;\r\n};\r\n","import { ENTRIES_PER_PAGE } from '../config';\r\n\r\nlet journalEntriesEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.journalEntriesWrapper = document.querySelector(\r\n    '.js-journal-entries-wrapper'\r\n  );\r\n  obj.journalPaginationWrapper = document.querySelector(\r\n    '.js-journal-pagination'\r\n  );\r\n  obj.journalFormWrapper = document.querySelector('.js-journal-form-wrapper');\r\n  return obj;\r\n};\r\n\r\nexport const queryJournalEntriesEls = function () {\r\n  journalEntriesEls = getElements();\r\n};\r\n\r\nexport const addJournalEntriesHandler = function (handler) {\r\n  journalEntriesEls.journalEntriesWrapper.addEventListener('click', e => {\r\n    if (e.target.closest('.c-journal-entry')) {\r\n      const clickedCard = e.target.closest('.c-journal-entry');\r\n      journalEntriesEls.journalEntriesWrapper\r\n        .querySelector('.c-journal-entry--active')\r\n        .classList.remove('c-journal-entry--active');\r\n      clickedCard.classList.add('c-journal-entry--active');\r\n      return handler(clickedCard.getAttribute('data-id'));\r\n    }\r\n\r\n    return;\r\n  });\r\n};\r\n\r\nexport const addJournalPaginationHandler = function (handler) {\r\n  journalEntriesEls.journalPaginationWrapper.addEventListener('click', e => {\r\n    if (e.target.classList.contains('js-journal-pagination-btn')) {\r\n      handler(+e.target.getAttribute('data-pagination-btn'));\r\n    }\r\n  });\r\n};\r\n\r\nexport const removeEmptyJournalCard = function () {\r\n  const emptyCard = journalEntriesEls.journalEntriesWrapper.querySelector(\r\n    '.c-journal-entry--new'\r\n  );\r\n  if (emptyCard) {\r\n    emptyCard.remove();\r\n    activateEntry(selectFirstEntry());\r\n  }\r\n};\r\n\r\nconst selectFirstEntry = function () {\r\n  return journalEntriesEls.journalEntriesWrapper.querySelector(\r\n    '.c-journal-entry'\r\n  );\r\n};\r\n\r\nconst activateEntry = function (entryEl) {\r\n  if (!entryEl) return;\r\n  const previouslyActive = journalEntriesEls.journalEntriesWrapper.querySelector(\r\n    '.c-journal-entry--active'\r\n  );\r\n  if (previouslyActive)\r\n    previouslyActive.classList.remove('c-journal-entry--active');\r\n  entryEl.classList.add('c-journal-entry--active');\r\n};\r\n\r\nconst makePaginationBtnActive = function (paginationPage) {\r\n  const priorPagination = journalEntriesEls.journalEntriesWrapper.querySelector(\r\n    '.btn--pagination--active'\r\n  );\r\n  if (priorPagination)\r\n    priorPagination.classList.remove('btn--pagination--active');\r\n\r\n  journalEntriesEls.journalEntriesWrapper\r\n    .querySelectorAll('.btn--pagination')\r\n    [paginationPage - 1].classList.add('btn--pagination--active');\r\n};\r\n\r\nconst renderJournalPagination = function (entriesNumber, paginationPage) {\r\n  journalEntriesEls.journalPaginationWrapper.innerHTML = '';\r\n\r\n  let html = '';\r\n  const buttonsNumber = Math.ceil(entriesNumber / ENTRIES_PER_PAGE);\r\n  for (let i = 1; i <= buttonsNumber; i++) {\r\n    html += `\r\n        <button class=\"c-journal-pagination__button btn btn--pagination js-journal-pagination-btn\" data-pagination-btn=\"${i}\">${i}</button>\r\n    `;\r\n  }\r\n  journalEntriesEls.journalPaginationWrapper.insertAdjacentHTML(\r\n    'afterbegin',\r\n    html\r\n  );\r\n  makePaginationBtnActive(paginationPage);\r\n};\r\n\r\nexport const clearJournalEntries = function () {\r\n  const existingEntries = journalEntriesEls.journalEntriesWrapper.querySelectorAll(\r\n    '.c-journal-entry'\r\n  );\r\n  if (existingEntries) existingEntries.forEach(el => el.remove());\r\n  journalEntriesEls.journalPaginationWrapper.innerHTML = '';\r\n};\r\n\r\nexport const renderJournalEntries = function (\r\n  entriesData,\r\n  paginationPage = 1,\r\n  clear = true\r\n) {\r\n  if (entriesData.length < 1) return;\r\n  const existingEls = journalEntriesEls.journalEntriesWrapper.querySelectorAll(\r\n    '.c-journal-entry'\r\n  );\r\n\r\n  if (existingEls && clear) existingEls.forEach(el => el.remove());\r\n\r\n  const entriesRange =\r\n    paginationPage !== 1\r\n      ? [\r\n          paginationPage * -ENTRIES_PER_PAGE,\r\n          paginationPage * -ENTRIES_PER_PAGE + ENTRIES_PER_PAGE,\r\n        ]\r\n      : [-ENTRIES_PER_PAGE];\r\n\r\n  if (!entriesData) return;\r\n  entriesData.slice(...entriesRange).forEach(entry => {\r\n    const html = `\r\n      <div class=\"c-journal-entry ${\r\n        entry.id ? '' : 'c-journal-entry--new'\r\n      }\" data-id=${entry.id}>\r\n          <div class=\"c-journal-entry__unit-wrapper\">\r\n              <span class=\"c-journal-entry__date\">${entry.dateShort}</span>\r\n              <span class=\"c-journal-entry__data\">${entry.ticker}</span>\r\n          </div>\r\n          <div class=\"c-journal-entry__unit-wrapper\">\r\n              <span class=\"c-journal-entry__data\">${entry.side} side</span>\r\n              <span class=\"c-journal-entry__data\">${\r\n                entry.sharesAmount\r\n              } shares</span>\r\n          </div>\r\n          <div class=\"c-journal-entry__unit-wrapper\">\r\n              <span class=\"c-journal-entry__data\">avg.entry: ${\r\n                entry.avgEntry\r\n              }</span>\r\n              <span class=\"c-journal-entry__data\">return: ${\r\n                entry.returnCash\r\n              }</span>\r\n          </div>\r\n          <div class=\"c-journal-entry__unit-wrapper\">\r\n              <span class=\"c-journal-entry__data\">avg.exit: ${\r\n                entry.avgExit\r\n              }</span>\r\n              <span class=\"c-journal-entry__data\">% return ${\r\n                entry.returnPercent\r\n              }</span>\r\n          </div>\r\n          <svg class=\"c-journal-entry__chevron svg svg--chevron\" viewBox=\"0 0 31 20\"\r\n              xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path d=\"M1.5 1.5L15.5 16.5L29.5 1.5\" stroke=\"#AAAAAA\" stroke-width=\"4\" />\r\n          </svg>\r\n      </div>\r\n      `;\r\n    journalEntriesEls.journalEntriesWrapper.insertAdjacentHTML(\r\n      'afterbegin',\r\n      html\r\n    );\r\n  });\r\n  const entriesLength = clear\r\n    ? entriesData.length\r\n    : journalEntriesEls.journalEntriesWrapper.querySelector('.c-journal-entry')\r\n        .length;\r\n  activateEntry(selectFirstEntry());\r\n  if (clear) renderJournalPagination(entriesLength, paginationPage);\r\n  return +selectFirstEntry().getAttribute('data-id');\r\n};\r\n","let journalFilterEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.journalFiltersWrapper = document.querySelector('.js-journal-filter');\r\n  obj.journalEntriesWrapper = document.querySelector(\r\n    '.js-journal-entries-wrapper'\r\n  );\r\n  return obj;\r\n};\r\n\r\nexport const queryJournalFilterEls = function () {\r\n  journalFilterEls = getElements();\r\n};\r\n\r\nexport const addJournalFiltersHandler = function (handler) {\r\n  journalFilterEls.journalFiltersWrapper.addEventListener('click', e => {\r\n    const existingNewEntry = journalFilterEls.journalEntriesWrapper.querySelector(\r\n      '.c-journal-entry--new'\r\n    );\r\n    if (e.target.classList.contains('js-new-trade-btn') && !existingNewEntry)\r\n      handler('new');\r\n    if (e.target.classList.contains('js-filter-btn') && !existingNewEntry)\r\n      handler('filter');\r\n  });\r\n};\r\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function count(values, valueof) {\n  let count = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  }\n  return count;\n}\n","function length(array) {\n  return array.length | 0;\n}\n\nfunction empty(length) {\n  return !(length > 0);\n}\n\nfunction arrayify(values) {\n  return typeof values !== \"object\" || \"length\" in values ? values : Array.from(values);\n}\n\nfunction reducer(reduce) {\n  return values => reduce(...values);\n}\n\nexport default function cross(...values) {\n  const reduce = typeof values[values.length - 1] === \"function\" && reducer(values.pop());\n  values = values.map(arrayify);\n  const lengths = values.map(length);\n  const j = values.length - 1;\n  const index = new Array(j + 1).fill(0);\n  const product = [];\n  if (j < 0 || lengths.some(empty)) return product;\n  while (true) {\n    product.push(index.map((j, i) => values[i][j]));\n    let i = j;\n    while (++index[i] === lengths[i]) {\n      if (i === 0) return reduce ? product.map(reduce) : product;\n      index[i--] = 0;\n    }\n  }\n}\n","export default function cumsum(values, valueof) {\n  var sum = 0, index = 0;\n  return Float64Array.from(values, valueof === undefined\n    ? v => (sum += +v || 0)\n    : v => (sum += +valueof(v, index++, values) || 0));\n}","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function variance(values, valueof) {\n  let count = 0;\n  let delta;\n  let mean = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n  if (count > 1) return sum / (count - 1);\n}\n","import variance from \"./variance.js\";\n\nexport default function deviation(values, valueof) {\n  const v = variance(values, valueof);\n  return v ? Math.sqrt(v) : v;\n}\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(value);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","export default function(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f = ascending] = F;\n  if (f.length === 1 || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascending(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascending(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(f);\n}\n","import ascending from \"./ascending.js\";\nimport group, {rollup} from \"./group.js\";\nimport sort from \"./sort.js\";\n\nexport default function groupSort(values, reduce, key) {\n  return (reduce.length === 1\n    ? sort(rollup(values, reduce, key), (([ak, av], [bk, bv]) => ascending(av, bv) || ascending(ak, bk)))\n    : sort(group(values, key), (([ak, av], [bk, bv]) => reduce(av, bv) || ascending(ak, bk))))\n    .map(([key]) => key);\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    step = -step;\n    start = Math.ceil(start * step);\n    stop = Math.floor(stop * step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import {tickIncrement} from \"./ticks.js\";\n\nexport default function nice(start, stop, count) {\n  let prestep;\n  while (true) {\n    const step = tickIncrement(start, stop, count);\n    if (step === prestep || step === 0 || !isFinite(step)) {\n      return [start, stop];\n    } else if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n    }\n    prestep = step;\n  }\n}\n","import count from \"../count.js\";\n\nexport default function(values) {\n  return Math.ceil(Math.log(count(values)) / Math.LN2) + 1;\n}\n","import {slice} from \"./array.js\";\nimport bisect from \"./bisect.js\";\nimport constant from \"./constant.js\";\nimport extent from \"./extent.js\";\nimport identity from \"./identity.js\";\nimport nice from \"./nice.js\";\nimport ticks, {tickIncrement} from \"./ticks.js\";\nimport sturges from \"./threshold/sturges.js\";\n\nexport default function() {\n  var value = identity,\n      domain = extent,\n      threshold = sturges;\n\n  function histogram(data) {\n    if (!Array.isArray(data)) data = Array.from(data);\n\n    var i,\n        n = data.length,\n        x,\n        values = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      values[i] = value(data[i], i, data);\n    }\n\n    var xz = domain(values),\n        x0 = xz[0],\n        x1 = xz[1],\n        tz = threshold(values, x0, x1);\n\n    // Convert number of thresholds into uniform thresholds, and nice the\n    // default domain accordingly.\n    if (!Array.isArray(tz)) {\n      const max = x1, tn = +tz;\n      if (domain === extent) [x0, x1] = nice(x0, x1, tn);\n      tz = ticks(x0, x1, tn);\n\n      // If the last threshold is coincident with the domains upper bound, the\n      // last bin will be zero-width. If the default domain is used, and this\n      // last threshold is coincident with the maximum input value, we can\n      // extend the niced upper bound by one tick to ensure uniform bin widths;\n      // otherwise, we simply remove the last threshold. Note that we dont\n      // coerce values or the domain to numbers, and thus must be careful to\n      // compare order (>=) rather than strict equality (===)!\n      if (tz[tz.length - 1] >= x1) {\n        if (max >= x1 && domain === extent) {\n          const step = tickIncrement(x0, x1, tn);\n          if (isFinite(step)) {\n            if (step > 0) {\n              x1 = (Math.floor(x1 / step) + 1) * step;\n            } else if (step < 0) {\n              x1 = (Math.ceil(x1 * -step) + 1) / -step;\n            }\n          }\n        } else {\n          tz.pop();\n        }\n      }\n    }\n\n    // Remove any thresholds outside the domain.\n    var m = tz.length;\n    while (tz[0] <= x0) tz.shift(), --m;\n    while (tz[m - 1] > x1) tz.pop(), --m;\n\n    var bins = new Array(m + 1),\n        bin;\n\n    // Initialize bins.\n    for (i = 0; i <= m; ++i) {\n      bin = bins[i] = [];\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\n      bin.x1 = i < m ? tz[i] : x1;\n    }\n\n    // Assign data to bins by value, ignoring any outside the domain.\n    for (i = 0; i < n; ++i) {\n      x = values[i];\n      if (x0 <= x && x <= x1) {\n        bins[bisect(tz, x, 0, m)].push(data[i]);\n      }\n    }\n\n    return bins;\n  }\n\n  histogram.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n  };\n\n  histogram.domain = function(_) {\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n  };\n\n  histogram.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n  };\n\n  return histogram;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = array.length - 1, compare = ascending) {\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import max from \"./max.js\";\nimport min from \"./min.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","import count from \"../count.js\";\nimport quantile from \"../quantile.js\";\n\nexport default function(values, min, max) {\n  return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(count(values), -1 / 3)));\n}\n","import count from \"../count.js\";\nimport deviation from \"../deviation.js\";\n\nexport default function(values, min, max) {\n  return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(count(values), -1 / 3)));\n}\n","export default function maxIndex(values, valueof) {\n  let max;\n  let maxIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  }\n  return maxIndex;\n}\n","export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n","import quantile from \"./quantile.js\";\n\nexport default function(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","export default function minIndex(values, valueof) {\n  let min;\n  let minIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  }\n  return minIndex;\n}\n","export default function pairs(values, pairof = pair) {\n  const pairs = [];\n  let previous;\n  let first = false;\n  for (const value of values) {\n    if (first) pairs.push(pairof(previous, value));\n    previous = value;\n    first = true;\n  }\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function least(values, compare = ascending) {\n  let min;\n  let defined = false;\n  if (compare.length === 1) {\n    let minValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, minValue) < 0\n          : ascending(value, value) === 0) {\n        min = element;\n        minValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, min) < 0\n          : compare(value, value) === 0) {\n        min = value;\n        defined = true;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\nimport minIndex from \"./minIndex.js\";\n\nexport default function leastIndex(values, compare = ascending) {\n  if (compare.length === 1) return minIndex(values, compare);\n  let minValue;\n  let min = -1;\n  let index = -1;\n  for (const value of values) {\n    ++index;\n    if (min < 0\n        ? compare(value, value) === 0\n        : compare(value, minValue) < 0) {\n      minValue = value;\n      min = index;\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function greatest(values, compare = ascending) {\n  let max;\n  let defined = false;\n  if (compare.length === 1) {\n    let maxValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, maxValue) > 0\n          : ascending(value, value) === 0) {\n        max = element;\n        maxValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, max) > 0\n          : compare(value, value) === 0) {\n        max = value;\n        defined = true;\n      }\n    }\n  }\n  return max;\n}\n","import ascending from \"./ascending.js\";\nimport maxIndex from \"./maxIndex.js\";\n\nexport default function greatestIndex(values, compare = ascending) {\n  if (compare.length === 1) return maxIndex(values, compare);\n  let maxValue;\n  let max = -1;\n  let index = -1;\n  for (const value of values) {\n    ++index;\n    if (max < 0\n        ? compare(value, value) === 0\n        : compare(value, maxValue) > 0) {\n      maxValue = value;\n      max = index;\n    }\n  }\n  return max;\n}\n","import leastIndex from \"./leastIndex.js\";\n\nexport default function scan(values, compare) {\n  const index = leastIndex(values, compare);\n  return index < 0 ? undefined : index;\n}\n","export default shuffler(Math.random);\n\nexport function shuffler(random) {\n  return function shuffle(array, i0 = 0, i1 = array.length) {\n    let m = i1 - (i0 = +i0);\n    while (m) {\n      const i = random() * m-- | 0, t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n    return array;\n  };\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","import min from \"./min.js\";\n\nexport default function(matrix) {\n  if (!(n = matrix.length)) return [];\n  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n      row[j] = matrix[j][i];\n    }\n  }\n  return transpose;\n}\n\nfunction length(d) {\n  return d.length;\n}\n","import transpose from \"./transpose.js\";\n\nexport default function() {\n  return transpose(arguments);\n}\n","export default function every(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  let index = -1;\n  for (const value of values) {\n    if (!test(value, ++index, values)) {\n      return false;\n    }\n  }\n  return true;\n}\n","export default function some(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  let index = -1;\n  for (const value of values) {\n    if (test(value, ++index, values)) {\n      return true;\n    }\n  }\n  return false;\n}\n","export default function filter(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  const array = [];\n  let index = -1;\n  for (const value of values) {\n    if (test(value, ++index, values)) {\n      array.push(value);\n    }\n  }\n  return array;\n}\n","export default function map(values, mapper) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  if (typeof mapper !== \"function\") throw new TypeError(\"mapper is not a function\");\n  return Array.from(values, (value, index) => mapper(value, index, values));\n}\n","export default function reduce(values, reducer, value) {\n  if (typeof reducer !== \"function\") throw new TypeError(\"reducer is not a function\");\n  const iterator = values[Symbol.iterator]();\n  let done, next, index = -1;\n  if (arguments.length < 3) {\n    ({done, value} = iterator.next());\n    if (done) return;\n    ++index;\n  }\n  while (({done, value: next} = iterator.next()), !done) {\n    value = reducer(value, next, ++index, values);\n  }\n  return value;\n}\n","export default function reverse(values) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  return Array.from(values).reverse();\n}\n","export default function difference(values, ...others) {\n  values = new Set(values);\n  for (const other of others) {\n    for (const value of other) {\n      values.delete(value);\n    }\n  }\n  return values;\n}\n","export default function disjoint(values, other) {\n  const iterator = other[Symbol.iterator](), set = new Set();\n  for (const v of values) {\n    if (set.has(v)) return false;\n    let value, done;\n    while (({value, done} = iterator.next())) {\n      if (done) break;\n      if (Object.is(v, value)) return false;\n      set.add(value);\n    }\n  }\n  return true;\n}\n","export default function set(values) {\n  return values instanceof Set ? values : new Set(values);\n}\n","import set from \"./set.js\";\n\nexport default function intersection(values, ...others) {\n  values = new Set(values);\n  others = others.map(set);\n  out: for (const value of values) {\n    for (const other of others) {\n      if (!other.has(value)) {\n        values.delete(value);\n        continue out;\n      }\n    }\n  }\n  return values;\n}\n","export default function superset(values, other) {\n  const iterator = values[Symbol.iterator](), set = new Set();\n  for (const o of other) {\n    if (set.has(o)) continue;\n    let value, done;\n    while (({value, done} = iterator.next())) {\n      if (done) return false;\n      set.add(value);\n      if (Object.is(o, value)) break;\n    }\n  }\n  return true;\n}\n","import superset from \"./superset.js\";\n\nexport default function subset(values, other) {\n  return superset(other, values);\n}\n","export default function union(...others) {\n  const set = new Set();\n  for (const other of others) {\n    for (const o of other) {\n      set.add(o);\n    }\n  }\n  return set;\n}\n","export {default as bisect, bisectRight, bisectLeft, bisectCenter} from \"./bisect.js\";\nexport {default as ascending} from \"./ascending.js\";\nexport {default as bisector} from \"./bisector.js\";\nexport {default as count} from \"./count.js\";\nexport {default as cross} from \"./cross.js\";\nexport {default as cumsum} from \"./cumsum.js\";\nexport {default as descending} from \"./descending.js\";\nexport {default as deviation} from \"./deviation.js\";\nexport {default as extent} from \"./extent.js\";\nexport {Adder, fsum, fcumsum} from \"./fsum.js\";\nexport {default as group, groups, index, indexes, rollup, rollups} from \"./group.js\";\nexport {default as groupSort} from \"./groupSort.js\";\nexport {default as bin, default as histogram} from \"./bin.js\"; // Deprecated; use bin.\nexport {default as thresholdFreedmanDiaconis} from \"./threshold/freedmanDiaconis.js\";\nexport {default as thresholdScott} from \"./threshold/scott.js\";\nexport {default as thresholdSturges} from \"./threshold/sturges.js\";\nexport {default as max} from \"./max.js\";\nexport {default as maxIndex} from \"./maxIndex.js\";\nexport {default as mean} from \"./mean.js\";\nexport {default as median} from \"./median.js\";\nexport {default as merge} from \"./merge.js\";\nexport {default as min} from \"./min.js\";\nexport {default as minIndex} from \"./minIndex.js\";\nexport {default as nice} from \"./nice.js\";\nexport {default as pairs} from \"./pairs.js\";\nexport {default as permute} from \"./permute.js\";\nexport {default as quantile, quantileSorted} from \"./quantile.js\";\nexport {default as quickselect} from \"./quickselect.js\";\nexport {default as range} from \"./range.js\";\nexport {default as least} from \"./least.js\";\nexport {default as leastIndex} from \"./leastIndex.js\";\nexport {default as greatest} from \"./greatest.js\";\nexport {default as greatestIndex} from \"./greatestIndex.js\";\nexport {default as scan} from \"./scan.js\"; // Deprecated; use leastIndex.\nexport {default as shuffle, shuffler} from \"./shuffle.js\";\nexport {default as sum} from \"./sum.js\";\nexport {default as ticks, tickIncrement, tickStep} from \"./ticks.js\";\nexport {default as transpose} from \"./transpose.js\";\nexport {default as variance} from \"./variance.js\";\nexport {default as zip} from \"./zip.js\";\nexport {default as every} from \"./every.js\";\nexport {default as some} from \"./some.js\";\nexport {default as filter} from \"./filter.js\";\nexport {default as map} from \"./map.js\";\nexport {default as reduce} from \"./reduce.js\";\nexport {default as reverse} from \"./reverse.js\";\nexport {default as sort} from \"./sort.js\";\nexport {default as difference} from \"./difference.js\";\nexport {default as disjoint} from \"./disjoint.js\";\nexport {default as intersection} from \"./intersection.js\";\nexport {default as subset} from \"./subset.js\";\nexport {default as superset} from \"./superset.js\";\nexport {default as union} from \"./union.js\";\nexport {InternMap, InternSet} from \"internmap\";\n","import { cross } from 'd3-array';\r\nimport { createShortDate } from '../helpers';\r\n\r\nlet journalFormEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.journalFormWrapper = document.querySelector('.js-journal-form-wrapper');\r\n  obj.journalEntriesWrapper = document.querySelector(\r\n    '.js-journal-entries-wrapper'\r\n  );\r\n  obj.detailsEntryPriceAvg;\r\n  obj.detailsExitPriceAvg;\r\n  obj.detailsEntrySharesTotal;\r\n  obj.detailsExitSharesTotal;\r\n  return obj;\r\n};\r\n\r\nconst toggleDisabledState = function (mode) {\r\n  journalFormEls.manualInputs.forEach(input => {\r\n    input.disabled = mode;\r\n  });\r\n};\r\n\r\nconst recalculateDetailsPrice = function (targetElClass, siblingElClass) {\r\n  const inputsArr = Array.from(\r\n    journalFormEls.journalFormWrapper.querySelectorAll(targetElClass)\r\n  );\r\n\r\n  const weightedResultsArr = inputsArr.map(\r\n    input =>\r\n      +input.value *\r\n      (input.nextElementSibling.value ? +input.nextElementSibling.value : 1)\r\n  );\r\n\r\n  const allShares = Array.from(\r\n    journalFormEls.journalFormWrapper.querySelectorAll(siblingElClass)\r\n  )\r\n    .map(input => (input.value ? +input.value : 1))\r\n    .reduce((acc, num) => acc + num, 0);\r\n\r\n  const filteredWeightedResultsArr = weightedResultsArr.filter(\r\n    num => num !== 0\r\n  );\r\n\r\n  return (\r\n    filteredWeightedResultsArr.reduce((acc, num) => acc + num, 0) / allShares\r\n  ).toFixed(2);\r\n};\r\n\r\nconst recalculateDetailsShares = function (targetElClass) {\r\n  return Array.from(\r\n    journalFormEls.journalFormWrapper.querySelectorAll(targetElClass)\r\n  )\r\n    .map(input => +input.value)\r\n    .reduce((acc, num) => acc + num, 0);\r\n};\r\n\r\nconst calculateDetailsOutput = function (focusedEl) {\r\n  journalFormEls.detailsEntryPriceAvg.textContent = recalculateDetailsPrice(\r\n    '.c-journal-form__entry',\r\n    '.c-journal-form__entry-size'\r\n  );\r\n  journalFormEls.detailsEntrySharesTotal.textContent = recalculateDetailsShares(\r\n    '.c-journal-form__entry-size'\r\n  );\r\n  journalFormEls.detailsExitPriceAvg.textContent = recalculateDetailsPrice(\r\n    '.c-journal-form__exit',\r\n    '.c-journal-form__exit-size'\r\n  );\r\n  journalFormEls.detailsExitSharesTotal.textContent = recalculateDetailsShares(\r\n    '.c-journal-form__exit-size'\r\n  );\r\n};\r\n\r\nconst addKeyEventToDetailsInputs = function () {\r\n  let keystrokeTimer;\r\n  journalFormEls.journalForm\r\n    .querySelectorAll('.js-form-details-input')\r\n    .forEach(input => {\r\n      input.addEventListener('keyup', e => {\r\n        clearTimeout(keystrokeTimer);\r\n        keystrokeTimer = setTimeout(() => {\r\n          calculateDetailsOutput(e.target);\r\n        }, 1000);\r\n      });\r\n    });\r\n};\r\n\r\nconst removeFirstCrossInstances = function () {\r\n  journalFormEls.journalFormWrapper\r\n    .querySelector(\r\n      '.c-journal-form__entry-size-wrapper .js-form-remove-details-row-btn'\r\n    )\r\n    .classList.add('c-journal-form__entry-size-remove-wrapper--disabled');\r\n  journalFormEls.journalFormWrapper\r\n    .querySelector(\r\n      '.c-journal-form__exit-size-wrapper .js-form-remove-details-row-btn'\r\n    )\r\n    .classList.add('c-journal-form__exit-size-remove-wrapper--disabled');\r\n};\r\n\r\nconst addCrossIconToExtraRows = function (targetEl) {\r\n  const crossBtn =\r\n    targetEl.previousElementSibling.lastElementChild.lastElementChild;\r\n  if (\r\n    crossBtn.classList.contains(\r\n      'c-journal-form__entry-size-remove-wrapper--disabled'\r\n    )\r\n  )\r\n    crossBtn.classList.remove(\r\n      'c-journal-form__entry-size-remove-wrapper--disabled'\r\n    );\r\n  if (\r\n    crossBtn.classList.contains(\r\n      'c-journal-form__exit-size-remove-wrapper--disabled'\r\n    )\r\n  )\r\n    crossBtn.classList.remove(\r\n      'c-journal-form__exit-size-remove-wrapper--disabled'\r\n    );\r\n};\r\n\r\nexport const queryJournalFormEls = function () {\r\n  journalFormEls = getElements();\r\n};\r\n\r\nexport const addJournalFormEventsHandler = function (handler) {\r\n  journalFormEls.journalFormWrapper.addEventListener('click', e => {\r\n    if (\r\n      e.target.classList.contains('js-form-edit-btn') &&\r\n      journalFormEls.journalFormWrapper.classList.contains(\r\n        's-journal__form-wrapper--read-mode'\r\n      )\r\n    )\r\n      handler('edit');\r\n\r\n    if (e.target.classList.contains('js-form-cancel-btn')) {\r\n      const formId = journalFormEls.journalForm.getAttribute('data-id');\r\n      if (formId) {\r\n        handler('cancel', formId);\r\n      } else {\r\n        handler(\r\n          'cancel',\r\n          journalFormEls.journalEntriesWrapper\r\n            .querySelector('.c-journal-entry')\r\n            .nextElementSibling.getAttribute('data-id')\r\n        );\r\n      }\r\n    }\r\n\r\n    if (e.target.classList.contains('js-form-swap-btn')) handler('swap');\r\n\r\n    if (e.target.classList.contains('js-form-plus-btn'))\r\n      handler('extra', '', e.target);\r\n\r\n    if (e.target.classList.contains('js-form-remove-details-row-btn'))\r\n      handler('pop', '', e.target);\r\n\r\n    if (e.target.classList.contains('js-form-save-btn')) handler('save');\r\n\r\n    if (e.target.classList.contains('js-form-delete-btn')) handler('delete');\r\n  });\r\n};\r\n\r\nexport const grabEntryFormID = function () {\r\n  return journalFormEls.journalForm.getAttribute('data-id');\r\n};\r\n\r\nexport const removeJournalFormDetailsRow = function (el) {\r\n  el.parentElement.remove();\r\n  el.remove();\r\n  journalFormEls.detailsEntrySharesTotal.textContent = recalculateDetailsShares(\r\n    '.c-journal-form__entry-size'\r\n  );\r\n  journalFormEls.detailsExitSharesTotal.textContent = recalculateDetailsShares(\r\n    '.c-journal-form__exit-size'\r\n  );\r\n  journalFormEls.detailsEntryPriceAvg.textContent = recalculateDetailsPrice(\r\n    '.c-journal-form__entry',\r\n    '.c-journal-form__entry-size'\r\n  );\r\n  journalFormEls.detailsExitPriceAvg.textContent = recalculateDetailsPrice(\r\n    '.c-journal-form__exit',\r\n    '.c-journal-form__exit-size'\r\n  );\r\n};\r\n\r\nexport const switchJournalFormModes = function (instruction = '') {\r\n  if (instruction === 'read-only') {\r\n    journalFormEls.journalFormWrapper.classList.remove(\r\n      's-journal__form-wrapper--edit-mode'\r\n    );\r\n    journalFormEls.journalFormWrapper.classList.add(\r\n      's-journal__form-wrapper--read-mode'\r\n    );\r\n    return;\r\n  }\r\n  if (\r\n    journalFormEls.journalFormWrapper.classList.contains(\r\n      's-journal__form-wrapper--read-mode'\r\n    )\r\n  ) {\r\n    journalFormEls.journalFormWrapper.classList.remove(\r\n      's-journal__form-wrapper--read-mode'\r\n    );\r\n    journalFormEls.journalFormWrapper.classList.add(\r\n      's-journal__form-wrapper--edit-mode'\r\n    );\r\n    journalFormEls.manualInputs.forEach(input => {\r\n      input.disabled = false;\r\n    });\r\n  } else if (\r\n    journalFormEls.journalFormWrapper.classList.contains(\r\n      's-journal__form-wrapper--edit-mode'\r\n    )\r\n  ) {\r\n    journalFormEls.journalFormWrapper.classList.remove(\r\n      's-journal__form-wrapper--edit-mode'\r\n    );\r\n    journalFormEls.journalFormWrapper.classList.add(\r\n      's-journal__form-wrapper--read-mode'\r\n    );\r\n    toggleDisabledState(true);\r\n  }\r\n};\r\n\r\nexport const renderExtraDetailsRows = function (targetEl) {\r\n  const lastRow = targetEl.previousElementSibling.lastElementChild;\r\n  const rowClone = lastRow.cloneNode(true);\r\n  lastRow.insertAdjacentElement('afterend', rowClone);\r\n  addKeyEventToDetailsInputs();\r\n  addCrossIconToExtraRows(targetEl);\r\n};\r\n\r\nexport const checkFormMode = function () {\r\n  if (\r\n    journalFormEls.journalFormWrapper.classList.contains(\r\n      's-journal__form-wrapper--read-mode'\r\n    )\r\n  ) {\r\n    switchJournalFormModes();\r\n  }\r\n};\r\n\r\nexport const switchPositionSide = function () {\r\n  const sideValueEl =\r\n    journalFormEls.swapBtn.previousElementSibling.firstElementChild;\r\n  sideValueEl.value === 'long'\r\n    ? (sideValueEl.value = 'short')\r\n    : (sideValueEl.value = 'long');\r\n};\r\n\r\nexport const grabAllUserInputs = function () {\r\n  const formInputs = {\r\n    id: journalFormEls.journalForm.getAttribute('data-id'),\r\n    date: journalFormEls.journalFormWrapper.querySelector('.js-form-date-input')\r\n      .value,\r\n    stock: journalFormEls.journalFormWrapper.querySelector(\r\n      '.js-form-stock-input'\r\n    ).value,\r\n    side: journalFormEls.journalFormWrapper.querySelector('.js-form-stock-side')\r\n      .value,\r\n    entriesPrices: Array.from(\r\n      journalFormEls.journalFormWrapper.querySelectorAll('.js-form-entry-input')\r\n    ).map(el => el.value),\r\n    entriesShares: Array.from(\r\n      journalFormEls.journalFormWrapper.querySelectorAll(\r\n        '.js-form-entry-shares-input'\r\n      )\r\n    ).map(el => el.value),\r\n    exitsPrices: Array.from(\r\n      journalFormEls.journalFormWrapper.querySelectorAll('.js-form-exit-input')\r\n    ).map(el => el.value),\r\n    exitsShares: Array.from(\r\n      journalFormEls.journalFormWrapper.querySelectorAll(\r\n        '.js-form-exit-shares-input'\r\n      )\r\n    ).map(el => el.value),\r\n    body: journalFormEls.journalFormWrapper.querySelector('.js-form-body-input')\r\n      .value,\r\n  };\r\n  return formInputs;\r\n};\r\n\r\nexport const clearJournalForm = function () {\r\n  journalFormEls.journalFormWrapper.innerHTML = '';\r\n};\r\n\r\nexport const updateFormValidationError = function (message = 'fail') {\r\n  journalFormEls.formValidationError.textContent = message;\r\n};\r\n\r\nexport const clearFormValidationError = function () {\r\n  journalFormEls.formValidationError.textContent = '';\r\n};\r\n\r\nexport const renderJournalForm = function (singleEntry) {\r\n  journalFormEls.journalFormWrapper.innerHTML = '';\r\n  [singleEntry] = singleEntry;\r\n\r\n  const html = `\r\n    <div class=\"c-journal-form js-journal-form\" data-id=\"${singleEntry.id}\">\r\n      <div class=\"c-journal-form__upper-region\">\r\n          <div class=\"c-journal-form__unit-wrapper\">\r\n              <span class=\"c-journal-form__data\">date: <input\r\n                      class=\"c-input-text c-input-text--compact c-journal-form__manual-input js-form-date-input\"\r\n                       value=\"${\r\n                         singleEntry.dateShort\r\n                           ? singleEntry.dateShort\r\n                           : createShortDate()\r\n                       }\" disabled>\r\n              </span>\r\n              <span class=\"c-journal-form__data\">stock: <input\r\n                      class=\"c-input-text c-input-text--compact c-journal-form__manual-input js-form-stock-input\"\r\n                      type=\"text\" value=\"${singleEntry.ticker}\" disabled></span>\r\n          </div>\r\n          <div class=\"c-journal-form__unit-wrapper\">\r\n              <div class=\"c-journal-form__trade-side-wrapper\">\r\n                  <span class=\"c-journal-form__data\">side: <input\r\n                          class=\"c-input-text c-input-text--compact c-journal-form__manual-input js-form-stock-side\"\r\n                          type=\"text\" value=\"${\r\n                            singleEntry.side ? singleEntry.side : 'long'\r\n                          }\" disabled></span>\r\n                  <button class=\"c-journal-form__swap btn btn--form-icon c-journal-form__edit-mode-btn js-form-swap-btn\">\r\n                      <svg class=\"svg svg--swap\" viewBox=\"0 0 17 29\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path d=\"M8.5 0L15.8612 12.75L1.13878 12.75L8.5 0Z\"\r\n                              fill=\"#C4C4C4\" />\r\n                          <path d=\"M8.5 29L1.13879 16.25L15.8612 16.25L8.5 29Z\"\r\n                              fill=\"#C4C4C4\" />\r\n                      </svg>\r\n  \r\n                  </button>\r\n              </div>\r\n              <span class=\"c-journal-form__data\">%return: <input\r\n                      class=\"c-input-text c-input-text--compact\" type=\"number\"\r\n                      value=\"${singleEntry.returnPercent}\" disabled></span>\r\n          </div>\r\n          <div class=\"c-journal-form__unit-wrapper\">\r\n              <span class=\"c-journal-form__data\">shares: <input\r\n                      class=\"c-input-text c-input-text--compact\" type=\"number\"\r\n                      value=\"${singleEntry.sharesAmount}\" disabled></span>\r\n              <span class=\"c-journal-form__data\">return: <input\r\n                      class=\"c-input-text c-input-text--compact\" type=\"number\"\r\n                      value=\"${singleEntry.returnCash}\" disabled></span>\r\n          </div>\r\n      </div>\r\n      <div class=\"c-journal-form__middle-region\">\r\n          <div class=\"c-journal-form__entries-wrapper\">\r\n              <div class=\"c-journal-form__entries-labels-wrapper\">\r\n                  <span class=\"c-journal-form__entries-label\">entries</span>\r\n                  <span class=\"c-journal-form__entries-label\">shares</span>\r\n              </div>\r\n              <div class=\"c-journal-form__entries-inner-wrapper js-entries-wrapper\">\r\n                  \r\n              </div>\r\n              <button class=\"c-journal-form__plus-entry btn btn--icon c-journal-form__edit-mode-btn js-form-plus-btn\">\r\n                  <svg class=\"svg svg--plus-circle\" viewBox=\"0 0 17 17\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <circle cx=\"8.5\" cy=\"8.5\" r=\"8.5\" fill=\"#29242A\" />\r\n                      <path d=\"M14 7H3V10H14V7Z\" fill=\"#C4C4C4\" />\r\n                      <path d=\"M10 14V3H7L7 14H10Z\" fill=\"#C4C4C4\" />\r\n                  </svg>\r\n  \r\n              </button>\r\n              <div class=\"c-journal-form__entries-labels-wrapper\">\r\n                  <span class=\"c-journal-form__entries-label\">average: <br><span\r\n                          class=\"c-journal-form__entries-label-result js-details-entry-price-average\">${\r\n                            singleEntry.tradeEntries[0][0]\r\n                              ? (\r\n                                  singleEntry.tradeEntries\r\n                                    .map(single => single[0] * single[1])\r\n                                    .reduce((acc, num) => acc + num, 0) /\r\n                                  singleEntry.tradeEntries\r\n                                    .map(single => single[1])\r\n                                    .reduce((acc, num) => acc + num, 0)\r\n                                ).toFixed(2)\r\n                              : ''\r\n                          }</span></span>\r\n                  <span class=\"c-journal-form__average-entry\">shares: <br><span\r\n                          class=\"c-journal-form__entries-label-result js-details-entry-shares-result\">${\r\n                            singleEntry.tradeExits[0][1]\r\n                              ? singleEntry.tradeExits\r\n                                  .map(single => single[1])\r\n                                  .reduce((acc, num) => acc + num, 0)\r\n                              : ''\r\n                          }</span></span>\r\n              </div>\r\n          </div>\r\n          <div class=\"c-journal-form__exits-wrapper\">\r\n              <div class=\"c-journal-form__exits-labels-wrapper\">\r\n                  <span class=\"c-journal-form__exits-label\">exits</span>\r\n                  <span class=\"c-journal-form__exits-label\">shares</span>\r\n              </div>\r\n              <div class=\"c-journal-form__exits-inner-wrapper js-exits-wrapper\">\r\n                \r\n              </div>\r\n              <button class=\"c-journal-form__plus-exit btn btn--icon c-journal-form__edit-mode-btn js-form-plus-btn\">\r\n                  <svg class=\"svg svg--plus-circle\" viewBox=\"0 0 17 17\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <circle cx=\"8.5\" cy=\"8.5\" r=\"8.5\" fill=\"#29242A\" />\r\n                      <path d=\"M14 7H3V10H14V7Z\" fill=\"#C4C4C4\" />\r\n                      <path d=\"M10 14V3H7L7 14H10Z\" fill=\"#C4C4C4\" />\r\n                  </svg>\r\n  \r\n              </button>\r\n              <div class=\"c-journal-form__exits-labels-wrapper\">\r\n                  <span class=\"c-journal-form__exits-label\">average: <br><span\r\n                          class=\"c-journal-form__exits-label-result js-details-exit-price-average\">${\r\n                            singleEntry.tradeExits[0][0]\r\n                              ? (\r\n                                  singleEntry.tradeExits\r\n                                    .map(single => single[0] * single[1])\r\n                                    .reduce((acc, num) => acc + num, 0) /\r\n                                  singleEntry.tradeExits\r\n                                    .map(single => single[1])\r\n                                    .reduce((acc, num) => acc + num, 0)\r\n                                ).toFixed(2)\r\n                              : ''\r\n                          }</span></span>\r\n                  <span class=\"c-journal-form__average-exit\">shares: <br><span\r\n                          class=\"c-journal-form__exits-label-result js-details-exit-shares-result\">${\r\n                            singleEntry.tradeExits[0][1]\r\n                              ? singleEntry.tradeExits\r\n                                  .map(single => single[1])\r\n                                  .reduce((acc, num) => acc + num, 0)\r\n                              : ''\r\n                          }</span></span>\r\n              </div>\r\n          </div>\r\n  \r\n      </div>\r\n      <p class=\"c-journal-form__error-message js-form-error-message\"></p>\r\n    <textarea class=\"c-journal-form__text-area c-journal-form__manual-input js-form-body-input\" rows=\"10\" disabled>${\r\n      singleEntry.body\r\n    }</textarea>\r\n    </div>\r\n    <div class=\"c-journal-form__buttons-wrapper\">\r\n        <button class=\"c-journal-from__button-delete btn btn--secondary js-form-delete-btn\">delete</button>\r\n        <div class=\"c-journal-form__buttons-inner-wrapper\">\r\n            <button class=\"c-journal-form__button-cancel btn btn--secondary c-journal-form__edit-mode-btn js-form-cancel-btn\">cancel</button>\r\n            <button class=\"c-journal-form__button-save btn btn--primary c-journal-form__edit-mode-btn js-form-save-btn\">save</button>\r\n        </div>\r\n        <button class=\"c-journal-form__button-edit btn btn--primary js-form-edit-btn\">edit</button>\r\n    </div>\r\n    `;\r\n\r\n  journalFormEls.journalFormWrapper.insertAdjacentHTML('afterbegin', html);\r\n\r\n  journalFormEls.journalForm = document.querySelector('.js-journal-form');\r\n  journalFormEls.formValidationError = document.querySelector(\r\n    '.js-form-error-message'\r\n  );\r\n\r\n  const entriesSection = document.querySelector('.js-entries-wrapper');\r\n  const exitsSection = document.querySelector('.js-exits-wrapper');\r\n  singleEntry.tradeEntries.forEach(transaction => {\r\n    entriesSection.innerHTML += `\r\n          <div class=\"c-journal-form__entry-size-wrapper\">\r\n              <input type=\"number\"\r\n              class=\"c-journal-form__entry c-input-text c-input-text--compact c-journal-form__manual-input  js-form-details-input js-form-entry-input\"\r\n              value=\"${transaction[0]}\" disabled>\r\n              <input type=\"number\"\r\n              class=\"c-journal-form__entry-size c-input-text c-input-text--compact c-journal-form__manual-input  js-form-details-input js-form-entry-shares-input\"\r\n              value=\"${transaction[1]}\" disabled>\r\n              <div class=\"c-journal-form__entry-size-remove-wrapper c-journal-form__edit-mode-btn js-form-remove-details-row-btn\">\r\n                <span class=\"c-journal-form__entry-size-remove-btn\">x</span>\r\n              </div>\r\n          </div>\r\n        `;\r\n  });\r\n\r\n  singleEntry.tradeExits.forEach(transaction => {\r\n    exitsSection.innerHTML += `\r\n          <div class=\"c-journal-form__exit-size-wrapper\">\r\n              <input type=\"number\"\r\n              class=\"c-journal-form__exit c-input-text c-input-text--compact c-journal-form__manual-input js-form-details-input js-form-exit-input\"\r\n              value=\"${transaction[0]}\" disabled>\r\n              <input type=\"number\"\r\n              class=\"c-journal-form__exit-size c-input-text c-input-text--compact c-journal-form__manual-input  js-form-details-input js-form-exit-shares-input\"\r\n              value=\"${transaction[1]}\" disabled>\r\n              <div class=\"c-journal-form__exit-size-remove-wrapper c-journal-form__edit-mode-btn js-form-remove-details-row-btn\">\r\n              <span class=\"c-journal-form__exit-size-remove-btn\">x</span>\r\n            </div>\r\n          </div>\r\n        `;\r\n  });\r\n\r\n  journalFormEls.swapBtn = journalFormEls.journalFormWrapper.querySelector(\r\n    '.js-form-swap-btn'\r\n  );\r\n  journalFormEls.manualInputs = journalFormEls.journalFormWrapper.querySelectorAll(\r\n    '.c-journal-form__manual-input'\r\n  );\r\n\r\n  journalFormEls.detailsExitPriceAvg = journalFormEls.journalFormWrapper.querySelector(\r\n    '.js-details-exit-price-average'\r\n  );\r\n  journalFormEls.detailsExitSharesTotal = journalFormEls.journalFormWrapper.querySelector(\r\n    '.js-details-exit-shares-result'\r\n  );\r\n  journalFormEls.detailsEntryPriceAvg = journalFormEls.journalFormWrapper.querySelector(\r\n    '.js-details-entry-price-average'\r\n  );\r\n  journalFormEls.detailsEntrySharesTotal = journalFormEls.journalFormWrapper.querySelector(\r\n    '.js-details-entry-shares-result'\r\n  );\r\n  addKeyEventToDetailsInputs();\r\n  removeFirstCrossInstances();\r\n};\r\n","import { createLongDate, createShortDate } from '../helpers';\r\n\r\nexport const validateJournalForm = function (inputData, accountCapital = 0) {\r\n  if (accountCapital < 1)\r\n    return ['ERROR', 'Account capital needs to be above zero'];\r\n\r\n  const dateLong = createLongDate(inputData.date);\r\n\r\n  // dates validation\r\n  let dateRegex = /^[0-9\\/]+$/;\r\n  if (dateLong === 'ERROR')\r\n    return ['ERROR', 'date must be in the format of dd/mm/yy'];\r\n\r\n  const dateShort = createShortDate(dateLong);\r\n\r\n  // stock ticker validation\r\n  let tickerRegex = /^[a-zA-Z]+$/;\r\n  let ticker;\r\n  if (!tickerRegex.test(inputData.stock))\r\n    return ['ERROR', 'Stock ticker field only accepts letters'];\r\n  ticker = inputData.stock.toUpperCase();\r\n\r\n  // trade side\r\n  const side = inputData.side;\r\n\r\n  // id\r\n  const id = inputData.id ? +inputData.id : Date.now();\r\n\r\n  // validating trade details\r\n  if (\r\n    !inputData.entriesPrices ||\r\n    !inputData.entriesShares ||\r\n    !inputData.exitsPrices ||\r\n    !inputData.exitsShares\r\n  )\r\n    return [\r\n      'ERROR',\r\n      'All entries, exits and shares rows must be filled in or deleted',\r\n    ];\r\n\r\n  const entriesPrices = inputData.entriesPrices\r\n    .map(entry => +entry)\r\n    .filter(entry => entry > 0);\r\n  const entriesShares = inputData.entriesShares\r\n    .map(entry => +entry)\r\n    .filter(entry => entry > 0);\r\n  const exitsPrices = inputData.exitsPrices\r\n    .map(exit => +exit)\r\n    .filter(entry => entry > 0);\r\n  const exitsShares = inputData.exitsShares\r\n    .map(exit => +exit)\r\n    .filter(entry => entry > 0);\r\n\r\n  // validating if prices and shares only have digits and dots\r\n  let entriesRegex = /^\\d+(\\.\\d+)*$/;\r\n  let areEntriesValid = true;\r\n  [...entriesPrices, ...entriesShares, ...exitsPrices, ...exitsShares].forEach(\r\n    digit => {\r\n      if (!entriesRegex.test(digit)) areEntriesValid = false;\r\n    }\r\n  );\r\n\r\n  if (!areEntriesValid)\r\n    return [\r\n      'ERROR',\r\n      'All entries, exits and shares must be positive and only contain digits and dots',\r\n    ];\r\n\r\n  if (\r\n    entriesPrices.length !== entriesShares.length ||\r\n    exitsPrices.length !== exitsShares.length\r\n  )\r\n    return [\r\n      'ERROR',\r\n      'All entries, exits and shares rows must be filled in or deleted. Only positive digits and dots are accepted',\r\n    ];\r\n\r\n  // check if the number of entry shares equals the number of exit shares\r\n  const sharesAmount = entriesShares.reduce((acc, num) => acc + num, 0);\r\n  if (sharesAmount !== exitsShares.reduce((acc, num) => acc + num, 0))\r\n    return ['ERROR', 'Entry shares must be equal to exit shares'];\r\n\r\n  // make one array for tradeEntries and one for tradeExits to match the format\r\n  let tradeEntries = [];\r\n  entriesPrices.forEach((price, index) => {\r\n    tradeEntries.push([price, entriesShares[index]]);\r\n  });\r\n\r\n  let tradeExits = [];\r\n  exitsPrices.forEach((price, index) => {\r\n    tradeExits.push([price, exitsShares[index]]);\r\n  });\r\n\r\n  // calculate avg entry price\r\n  const avgEntry = +(\r\n    tradeEntries\r\n      .map(row => row[0] * row[1])\r\n      .reduce((acc, num) => acc + num, 0) / sharesAmount\r\n  ).toFixed(2);\r\n\r\n  // calculate avg exit price\r\n  const avgExit = +(\r\n    tradeExits.map(row => row[0] * row[1]).reduce((acc, num) => acc + num, 0) /\r\n    sharesAmount\r\n  ).toFixed(2);\r\n\r\n  // calculate cash return\r\n  let returnCash;\r\n  if (side === 'long')\r\n    returnCash = +((avgExit - avgEntry) * sharesAmount).toFixed(2);\r\n  if (side === 'short')\r\n    returnCash = +((avgEntry - avgExit) * sharesAmount).toFixed(2);\r\n\r\n  // calculate account % return\r\n  const returnPercent = +((returnCash / accountCapital) * 100).toFixed(2);\r\n\r\n  const body = inputData.body;\r\n\r\n  const entryObj = {\r\n    id,\r\n    dateLong,\r\n    dateShort,\r\n    ticker,\r\n    side,\r\n    tradeEntries,\r\n    tradeExits,\r\n    sharesAmount,\r\n    avgEntry,\r\n    avgExit,\r\n    returnCash,\r\n    returnPercent,\r\n    body,\r\n    previousTicker: '',\r\n    previousDateShort: '',\r\n    previousDateLong: '',\r\n  };\r\n\r\n  // all validation checks passed\r\n  return ['PASS', entryObj];\r\n};\r\n","let settingsEls = {};\r\n\r\nconst getElements = function (obj = {}) {\r\n  obj.settingsResetBtn = document.querySelector('.js-settings-reset-btn');\r\n  return obj;\r\n};\r\n\r\nexport const querySettingsEls = function () {\r\n  settingsEls = getElements();\r\n};\r\n\r\nexport const addAppResetHandler = function (handler) {\r\n  settingsEls.settingsResetBtn.addEventListener('click', handler);\r\n};\r\n","import {\r\n  fetchUserFromJSON,\r\n  checkIfJournalEmpty,\r\n  passData,\r\n  passNestedData,\r\n  updateCapital,\r\n  updateCalendarData,\r\n  findJournalEntry,\r\n  updateJournalData,\r\n  clearUserObject,\r\n  targetSelectedEntry,\r\n  saveToLocalStorage,\r\n} from './models/dataModel';\r\nimport {\r\n  addNavigationHandler,\r\n  queryCoreEls,\r\n  toggleSections,\r\n  removeLoadingScreen,\r\n  showNoDataScreens,\r\n  hideNoDataScreens,\r\n  addPopupHandler,\r\n  showSingleBtnPopup,\r\n  showDoubleBtnPopup,\r\n  hidePopup,\r\n  redirectToLogin,\r\n} from './views/coreView';\r\nimport {\r\n  queryCalcEls,\r\n  addCalcCapitalHandler,\r\n  addCalcPositionHandler,\r\n  addCalcRatioHandler,\r\n  renderCapitalMessage,\r\n  renderCalcResult,\r\n  clearCalcResult,\r\n} from './views/calculatorsView';\r\nimport { calcPositionResult, calcRatioResult } from './models/calculatorsModel';\r\nimport { queryMonthlyEls, renderMonthlyTable } from './views/tableMonthlyView';\r\nimport {\r\n  queryProfitableEls,\r\n  renderProfitableTable,\r\n} from './views/tableProfitableView';\r\nimport {\r\n  queryOverallEls,\r\n  renderStreaks,\r\n  renderLongShortStats,\r\n  renderLongShortPie,\r\n  clearLongShortCanvas,\r\n} from './views/chartOverallView';\r\nimport { computeMonthlyData } from './models/tableMonthlyModel';\r\nimport { computeProfitableData } from './models/tableProfitableModel';\r\nimport {\r\n  queryPerformanceEls,\r\n  renderPerformanceChart,\r\n  addPerformanceRenderHandler,\r\n  clearPerformanceCanvas,\r\n} from './views/chartPerformanceView';\r\nimport { formatPerformanceData } from './models/chartPerformanceModel';\r\nimport {\r\n  queryBestWorstEls,\r\n  renderWorstBestChart,\r\n  clearWorstBestCanvas,\r\n  addWorstBestRenderHandler,\r\n} from './views/chartWorstBestView';\r\nimport { formatWorstBestData } from './models/chartWorstBestModel';\r\nimport {\r\n  queryDetailsEls,\r\n  updateCapitalOutput,\r\n} from './views/accountDetailsView';\r\nimport {\r\n  queryJournalEntriesEls,\r\n  addJournalEntriesHandler,\r\n  renderJournalEntries,\r\n  removeEmptyJournalCard,\r\n  addJournalPaginationHandler,\r\n  clearJournalEntries,\r\n} from './views/journalEntriesView';\r\nimport {\r\n  queryJournalFilterEls,\r\n  addJournalFiltersHandler,\r\n} from './views/journalFiltersView';\r\nimport {\r\n  queryJournalFormEls,\r\n  addJournalFormEventsHandler,\r\n  renderJournalForm,\r\n  switchJournalFormModes,\r\n  checkFormMode,\r\n  switchPositionSide,\r\n  grabEntryFormID,\r\n  renderExtraDetailsRows,\r\n  removeJournalFormDetailsRow,\r\n  grabAllUserInputs,\r\n  updateFormValidationError,\r\n  clearFormValidationError,\r\n  clearJournalForm,\r\n} from './views/journalFormView';\r\nimport { validateJournalForm } from './models/journalFormModel';\r\nimport { querySettingsEls, addAppResetHandler } from './views/settingsView';\r\n\r\n// ZONE - controllers\r\n\r\nconst controlLoading = function () {\r\n  removeLoadingScreen();\r\n};\r\n\r\nconst controlNoDataScreens = function () {\r\n  const outcome = checkIfJournalEmpty();\r\n  if (outcome === 'empty') showNoDataScreens();\r\n  if (outcome === 'full') hideNoDataScreens();\r\n};\r\n\r\nconst controlNavigation = function (targetEl) {\r\n  const furtherAction = toggleSections(targetEl);\r\n  if (furtherAction === 'rerender') {\r\n    clearPerformanceCanvas();\r\n    clearWorstBestCanvas();\r\n    clearLongShortCanvas();\r\n    renderPerformanceChart();\r\n    renderWorstBestChart();\r\n    renderLongShortPie();\r\n  }\r\n};\r\n\r\nconst controlPopups = function (action, dataAttr, entryID) {\r\n  if (action === 'hide') hidePopup();\r\n  if (action === 'proceed') {\r\n    if (dataAttr === 'logoff') {\r\n      redirectToLogin();\r\n    }\r\n    if (dataAttr === 'reset') {\r\n      clearUserObject();\r\n      controlNoDataScreens();\r\n      controlProfitableRender();\r\n      controlOverallRender();\r\n      controlPerformanceRender();\r\n      controlWorstBestRender();\r\n      controlMonthlyRender();\r\n      controlLongShortPieRender();\r\n      controlJournalRender();\r\n      hidePopup();\r\n      showSingleBtnPopup(\r\n        'You can do so in the capital management section',\r\n        'Your account capital is now 0 and needs to be updated',\r\n        'Application has been reset'\r\n      );\r\n    }\r\n    if (dataAttr === 'delete') {\r\n      hidePopup();\r\n      targetSelectedEntry(+entryID);\r\n      controlNoDataScreens();\r\n      controlProfitableRender();\r\n      controlOverallRender();\r\n      controlPerformanceRender();\r\n      controlWorstBestRender();\r\n      controlMonthlyRender();\r\n      controlLongShortPieRender();\r\n      controlJournalRender();\r\n      showSingleBtnPopup('Entry has been deleted');\r\n      updateCapital();\r\n      updateCapitalOutput(passData('capital'));\r\n    }\r\n  }\r\n};\r\n\r\nconst controlCalcCapital = function (amount, action) {\r\n  const capitalData = updateCapital(amount, action);\r\n  renderCapitalMessage(capitalData);\r\n  updateCapitalOutput(capitalData[2]);\r\n};\r\n\r\nconst controlCalcPosition = function (data) {\r\n  if (!data) return clearCalcResult('positionResult');\r\n  const positionResult = calcPositionResult(passData('capital'), data);\r\n  if (isNaN(positionResult)) return;\r\n  renderCalcResult(positionResult, 'positionResult');\r\n};\r\n\r\nconst controlCalcRatio = function (data) {\r\n  if (!data) return clearCalcResult('ratioResult');\r\n  const ratioResult = calcRatioResult(data);\r\n  if (isNaN(ratioResult) || !ratioResult) return clearCalcResult('ratioResult');\r\n  renderCalcResult(ratioResult, 'ratioResult');\r\n};\r\n\r\nconst controlMonthlyRender = function () {\r\n  const computedData = computeMonthlyData(passData('calendarData'));\r\n  // renderMonthlyTable(updateCalendarData(computedData));\r\n  renderMonthlyTable(computedData);\r\n};\r\n\r\nconst controlProfitableRender = function () {\r\n  const profitableStocks = computeProfitableData(passData('tickers'));\r\n  renderProfitableTable(profitableStocks);\r\n};\r\n\r\nconst controlOverallRender = function () {\r\n  renderLongShortStats(passData('overall'));\r\n  renderStreaks(passData('streaks'));\r\n};\r\n\r\nconst controlPerformanceRender = function (type = 'day') {\r\n  renderPerformanceChart(\r\n    formatPerformanceData(\r\n      passData('calendarData'),\r\n      passData('capital'),\r\n      passData('journal'),\r\n      type\r\n    )\r\n  );\r\n};\r\n\r\nconst controlWorstBestRender = function (type = 'worst') {\r\n  if (type === 'worst') {\r\n    renderWorstBestChart(formatWorstBestData(type, passData('worstTrades')));\r\n  }\r\n  if (type === 'best')\r\n    renderWorstBestChart(formatWorstBestData(type, passData('bestTrades')));\r\n};\r\n\r\nconst controlLongShortPieRender = function () {\r\n  renderLongShortPie(passData('overall').proportions);\r\n};\r\n\r\nconst controlJournalRender = function () {\r\n  const activeEntryID = renderJournalEntries(passData('journal'));\r\n  if (!activeEntryID) {\r\n    clearJournalEntries();\r\n    clearJournalForm();\r\n    return;\r\n  }\r\n  renderJournalForm(findJournalEntry(activeEntryID));\r\n};\r\n\r\nconst controlJournalFormEvents = function (action, id = '', targetEl = '') {\r\n  if (action === 'edit') {\r\n    clearFormValidationError();\r\n    switchJournalFormModes();\r\n  }\r\n  if (action === 'cancel') {\r\n    removeEmptyJournalCard();\r\n    switchJournalFormModes();\r\n    renderJournalForm(findJournalEntry(+id));\r\n  }\r\n  if (action === 'swap') switchPositionSide();\r\n  if (action === 'extra') renderExtraDetailsRows(targetEl);\r\n  if (action === 'pop') removeJournalFormDetailsRow(targetEl);\r\n  if (action === 'delete') {\r\n    const currentEntryID = grabEntryFormID();\r\n    if (currentEntryID) {\r\n      showDoubleBtnPopup(\r\n        currentEntryID,\r\n        'delete',\r\n        'Are you sure you want to delete this existing entry?'\r\n      );\r\n    } else {\r\n      showDoubleBtnPopup(\r\n        '',\r\n        'delete',\r\n        'Are you sure you want to delete this new entry?'\r\n      );\r\n    }\r\n  }\r\n\r\n  if (action === 'save') {\r\n    clearFormValidationError();\r\n    const validationOutcome = validateJournalForm(\r\n      grabAllUserInputs(),\r\n      passData('capital')\r\n    );\r\n    if (validationOutcome[0] === 'ERROR')\r\n      updateFormValidationError(validationOutcome[1]);\r\n    if (validationOutcome[0] === 'PASS') {\r\n      clearFormValidationError();\r\n      const updatedCapital = updateJournalData(validationOutcome[1]);\r\n      showSingleBtnPopup(\r\n        `% return: ${validationOutcome[1].returnPercent}, cash return: ${validationOutcome[1].returnCash}`,\r\n        `stock: ${validationOutcome[1].ticker}, date: ${validationOutcome[1].dateShort}`,\r\n        'Journal has been updated and sorted'\r\n      );\r\n      switchJournalFormModes('read-only');\r\n      controlJournalRender();\r\n      updateCapitalOutput(updatedCapital);\r\n      // re-render visualisations\r\n      controlNoDataScreens();\r\n      controlOverallRender();\r\n      controlLongShortPieRender();\r\n      controlWorstBestRender('best');\r\n      controlWorstBestRender();\r\n      controlProfitableRender();\r\n      controlPerformanceRender();\r\n      controlMonthlyRender();\r\n      saveToLocalStorage();\r\n    }\r\n  }\r\n};\r\n\r\nconst controlJournalActiveEntries = function (id = '') {\r\n  if (!id) return;\r\n  removeEmptyJournalCard();\r\n  switchJournalFormModes('read-only');\r\n  renderJournalForm(findJournalEntry(+id));\r\n};\r\n\r\nconst controlJournalFilters = function (action, id = '') {\r\n  if (action === 'new') {\r\n    if (passData('capital') < 1) {\r\n      showSingleBtnPopup(\r\n        'You can do so in the capital management section',\r\n        'Please add more capital to your account',\r\n        'Your account capital has fallen below 0'\r\n      );\r\n      return;\r\n    }\r\n    switchJournalFormModes('read-only');\r\n    renderJournalEntries(passData('dummyJournal'), '', false);\r\n    renderJournalForm(passData('dummyJournal'));\r\n    checkFormMode();\r\n  }\r\n  if (action === 'filter')\r\n    showSingleBtnPopup(\r\n      'Unfortunately the filters feature is not available in the current version'\r\n    );\r\n};\r\n\r\nconst controlJournalPagination = function (paginationBtn) {\r\n  const activeEntryID = renderJournalEntries(\r\n    passData('journal'),\r\n    paginationBtn\r\n  );\r\n  switchJournalFormModes('read-only');\r\n  renderJournalForm(findJournalEntry(activeEntryID));\r\n};\r\n\r\nconst controlAppReset = function () {\r\n  showDoubleBtnPopup(\r\n    '',\r\n    'reset',\r\n    'All user data will be deleted',\r\n    'Are you sure you want to reset the application?'\r\n  );\r\n};\r\n\r\nconst queryDOM = function () {\r\n  queryCoreEls();\r\n  queryProfitableEls();\r\n  queryOverallEls();\r\n  queryPerformanceEls();\r\n  queryDetailsEls();\r\n  queryBestWorstEls();\r\n  queryMonthlyEls();\r\n  queryJournalEntriesEls();\r\n  queryJournalFilterEls();\r\n  queryJournalFormEls();\r\n  queryCalcEls();\r\n  querySettingsEls();\r\n};\r\n\r\n// ZONE - event listeners\r\n\r\nwindow.addEventListener('DOMContentLoaded', e => {\r\n  fetchUserFromJSON();\r\n  queryDOM();\r\n  controlNoDataScreens();\r\n  addNavigationHandler(controlNavigation);\r\n  updateCapitalOutput(passData('capital'));\r\n  addCalcPositionHandler(controlCalcPosition);\r\n  addCalcRatioHandler(controlCalcRatio);\r\n  addCalcCapitalHandler(controlCalcCapital);\r\n  addPerformanceRenderHandler(controlPerformanceRender);\r\n  addWorstBestRenderHandler(controlWorstBestRender);\r\n  addJournalFiltersHandler(controlJournalFilters);\r\n  addJournalEntriesHandler(controlJournalActiveEntries);\r\n  addJournalFormEventsHandler(controlJournalFormEvents);\r\n  addJournalPaginationHandler(controlJournalPagination);\r\n  addPopupHandler(controlPopups);\r\n  addAppResetHandler(controlAppReset);\r\n  setTimeout(() => {\r\n    controlLoading();\r\n    controlProfitableRender();\r\n    controlOverallRender();\r\n    controlPerformanceRender();\r\n    controlWorstBestRender();\r\n    controlMonthlyRender();\r\n    controlLongShortPieRender();\r\n    controlJournalRender();\r\n  }, 700);\r\n});\r\n\r\nlet resizeTimer;\r\nwindow.addEventListener('resize', e => {\r\n  clearTimeout(resizeTimer);\r\n  resizeTimer = setTimeout(() => {\r\n    clearPerformanceCanvas();\r\n    clearWorstBestCanvas();\r\n    clearLongShortCanvas();\r\n    renderPerformanceChart();\r\n    renderWorstBestChart();\r\n    renderLongShortPie();\r\n  }, 1000);\r\n});\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}